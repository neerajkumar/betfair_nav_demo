!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){var Router=(require("underscore"),require("andlog"),require("clientconfig"),require("./router")),MainView=require("./views/main"),Me=require("./models/me"),BetfairFactory=require("./models/betfair_factory"),domReady=require("domready");module.exports={blastoff:function(){var self=window.app=this;window.me=new Me,this.betfair_roots=new BetfairFactory,this.router=new Router,domReady(function(){var mainView=self.view=new MainView({model:me,el:document.body});mainView.render(),self.router.on("newPage",mainView.setPage,mainView),self.router.history.start({pushState:!0,root:"/"})})},navigate:function(page){var url="/"===page.charAt(0)?page.slice(1):page;this.router.history.navigate(url,{trigger:!0})}},module.exports.blastoff()},{"./models/betfair_factory":3,"./models/me":5,"./router":10,"./views/main":14,andlog:89,clientconfig:94,domready:97,underscore:99}],2:[function(require,module,exports){var isLive="YOUR DOMAIN.com"===window.location.hostname;exports.identify=function(me){isLive&&(mixpanel.identify(me.id),mixpanel.name_tag(me.username),mixpanel.people.set({$email:me.email,$first_name:me.firstName,$last_name:me.lastName}),mixpanel.people.increment("web app opened"))},exports.track=function(action,dict,cb){isLive&&mixpanel.track(action,dict||{},cb)}},{}],3:[function(require,module){var Collection=require("ampersand-rest-collection"),BetfairRoot=require("./betfair_root");module.exports=Collection.extend({mainIndex:"id",model:BetfairRoot,url:"/api/betfair_roots"})},{"./betfair_root":4,"ampersand-rest-collection":36}],4:[function(require,module){var AmpersandModel=require("ampersand-model");module.exports=AmpersandModel.extend({props:{id:"any",name:["string",!0,""],children:["array",!1,""],type:["string",!1,""]},session:{selected:["boolean",!0,!1]},derived:{viewUrl:{deps:["id"],fn:function(){return"/ampersand_clients/event_types/"+this.id}},eventType:{deps:["name"],fn:function(){return this.name}},viewEventUrl:{deps:["id"],fn:function(){return"/ampersand_clients/events/"+this.id}}}})},{"ampersand-model":16}],5:[function(require,module){var AmpersandModel=require("ampersand-model");module.exports=AmpersandModel.extend({type:"user",props:{id:["string"],firstName:["string",!0,""],lastName:["string",!0,""],username:["string"]},derived:{fullName:{deps:["firstName","lastName"],cache:!0,fn:function(){return this.firstName+" "+this.lastName}},initials:{deps:["firstName","lastName"],cache:!0,fn:function(){return(this.firstName.charAt(0)+this.lastName.charAt(0)).toUpperCase()}}}})},{"ampersand-model":16}],6:[function(require,module){{var View=require("ampersand-view");require("underscore")}module.exports=View.extend({registerKeyboardShortcuts:function(){},unregisterKeyboardShortcuts:function(){}})},{"ampersand-view":67,underscore:99}],7:[function(require,module){var PageView=require("./base"),templates=require("../templates"),BetfairRootView=require("../views/betfair_root");module.exports=PageView.extend({pageTitle:"Event Types",template:templates.pages.collectionDemo,render:function(){this.renderWithTemplate(),this.renderCollection(this.collection,BetfairRootView,this.getByRole("betfair-roots-list")),this.collection.length||this.fetchCollection()},fetchCollection:function(){return this.collection.fetch(),!1}})},{"../templates":11,"../views/betfair_root":12,"./base":6}],8:[function(require,module){var PageView=require("./base"),templates=require("../templates"),EventView=require("../views/event"),Collection=require("../models/betfair_factory");module.exports=PageView.extend({pageTitle:"Event Types",template:templates.pages.event,bindings:{"model.name":"[role=name]","model.viewEventUrl":{type:"attribute",role:"name",name:"href"}},render:function(){this.renderWithTemplate();var self=this;if(void 0==this.model){var spec_id=window.location.href.split("/")[window.location.href.split("/").length-1];app.betfair_roots.getOrFetch(spec_id,{all:!0},function(err,model){err&&alert("couldnt find a model with id: "+spec_id),self.model=model;var childrenNodes=new Collection(self.model.children);self.renderCollection(childrenNodes,EventView,self.getByRole("events-list")),app.betfair_roots.length||self.fetchCollection()})}else{var childrenNodes=new Collection(this.model.children);this.renderCollection(childrenNodes,EventView,this.getByRole("events-list")),app.betfair_roots.length||this.fetchCollection()}},fetchCollection:function(){return new Collection(this.model.children).fetch(),!1},initialize:function(spec){var self=this;app.betfair_roots.getOrFetch(spec.id,{all:!0},function(err,model){err&&alert("couldnt find a model with id: "+spec.id),self.model=model})}})},{"../models/betfair_factory":3,"../templates":11,"../views/event":13,"./base":6}],9:[function(require,module){var PageView=require("./base"),templates=require("../templates"),EventView=require("../views/event"),Collection=require("../models/betfair_factory");module.exports=PageView.extend({pageTitle:"Events",template:templates.pages.event,bindings:{"model.name":"[role=name]","model.viewEventUrl":{type:"attribute",role:"name",name:"href"}},render:function(){this.renderWithTemplate();var self=this;if(void 0==this.model){var spec_id=window.location.href.split("/")[window.location.href.split("/").length-1];app.betfair_roots.getOrFetch(spec_id,{all:!0},function(){self.collection=app.betfair_roots,0==self.collection.models.length&&self.fetchCollection();var data=[],extractData=function(json,spec_id){var i=0;if(0==data.length)for(;i<json.length;){if(json.models[i].id==spec_id){data=json;break}if(void 0==json.models[i].children)break;extractData(new Collection(json.models[i].children),spec_id),i++}return data.length>0?data:void 0};self.collection=extractData(self.collection,spec_id),void 0!=self.collection&&self.collection.getOrFetch(spec_id,{all:!0},function(err,model){err&&alert("couldn't find a model with id: "+spec_id),self.model=model;var childrenNodes=new Collection(self.model.children);self.renderCollection(childrenNodes,EventView,self.getByRole("events-list")),childrenNodes.length||new Collection(self.model.children).fetch()})})}else{var childrenNodes=new Collection(this.model.children);this.renderCollection(childrenNodes,EventView,this.getByRole("events-list"))}},fetchCollection:function(){return setInterval(this.collection.fetch(),5e3),!1},initialize:function(spec){var self=this,collection=this.collection||app.betfair_roots,data=[],extractData=function(json,spec){var i=0;if(0==data.length)for(;i<json.length;){if(json.models[i].id==spec.id){data=json;break}if(void 0==json.models[i].children)break;extractData(new Collection(json.models[i].children),spec),i++}return data.length>0?data:void 0};this.collection=extractData(collection,spec),void 0!=this.collection&&this.collection.getOrFetch(spec.id,function(err,model){err&&alert("couldn't find a model with id: "+spec.id),self.model=model})}})},{"../models/betfair_factory":3,"../templates":11,"../views/event":13,"./base":6}],10:[function(require,module){var Router=require("ampersand-router"),CollectionDemo=require("./pages/collection-demo"),EventsCollectionView=require("./pages/events-collection"),EventTypesCollectionView=require("./pages/event-types-collection");module.exports=Router.extend({routes:{ampersand_clients:"home","ampersand_clients/collections":"collectionDemo","ampersand_clients/event_types/:id":"EventTypesCollectionView","ampersand_clients/events/:id":"EventsCollectionView","(*path)":"catchAll"},home:function(){this.trigger("page",new CollectionDemo({model:me,collection:app.betfair_roots}))},collectionDemo:function(){this.trigger("page",new CollectionDemo({model:me,collection:app.betfair_roots}))},EventTypesCollectionView:function(id){this.trigger("page",new EventTypesCollectionView({id:id,collection:app.betfair_roots}))},EventsCollectionView:function(id){this.trigger("page",new EventsCollectionView({id:id}))},catchAll:function(){this.redirectTo("")}})},{"./pages/collection-demo":7,"./pages/event-types-collection":8,"./pages/events-collection":9,"ampersand-router":61}],11:[function(require,module,exports){!function(root,factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():root.templatizer=factory()}(this,function(){var templatizer=(function(){function r(r){return null!=r&&""!==r}function n(e){return Array.isArray(e)?e.map(n).filter(r).join(" "):e}var e={};return e.merge=function t(n,e){if(1===arguments.length){for(var a=n[0],s=1;s<n.length;s++)a=t(a,n[s]);return a}var i=n["class"],l=e["class"];(i||l)&&(i=i||[],l=l||[],Array.isArray(i)||(i=[i]),Array.isArray(l)||(l=[l]),n["class"]=i.concat(l).filter(r));for(var o in e)"class"!=o&&(n[o]=e[o]);return n},e.joinClasses=n,e.cls=function(r,t){for(var a=[],s=0;s<r.length;s++)a.push(t&&t[s]?e.escape(n([r[s]])):n(r[s]));var i=n(a);return i.length?' class="'+i+'"':""},e.attr=function(r,n,t,a){return"boolean"==typeof n||null==n?n?" "+(a?r:r+'="'+r+'"'):"":0==r.indexOf("data")&&"string"!=typeof n?" "+r+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'":t?" "+r+'="'+e.escape(n)+'"':" "+r+'="'+n+'"'},e.attrs=function(r,t){var a=[],s=Object.keys(r);if(s.length)for(var i=0;i<s.length;++i){var l=s[i],o=r[l];"class"==l?(o=n(o))&&a.push(" "+l+'="'+o+'"'):a.push(e.attr(l,o,!1,t))}return a.join("")},e.escape=function(r){var n=String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return n===""+r?r:n},e.rethrow=function a(r,n,e,t){if(!(r instanceof Error))throw r;if(!("undefined"==typeof window&&n||t))throw r.message+=" on line "+e,r;try{t=t||require("fs").readFileSync(n,"utf8")}catch(s){a(r,null,e)}var i=3,l=t.split("\n"),o=Math.max(e-i,0),c=Math.min(l.length,e+i),i=l.slice(o,c).map(function(r,n){var t=n+o+1;return(t==e?"  > ":"    ")+t+"| "+r}).join("\n");throw r.path=n,r.message=(n||"Jade")+":"+e+"\n"+i+"\n\n"+r.message,r},e}(),{});return templatizer.includes={},templatizer.pages={},templatizer.body=function(){return'<body><nav class="navbar navbar-default"><div class="container-fluid"><div class="navbar-header"><a href="/" class="navbar-brand">Ampersand Client</a></div></div></nav><div class="container"><main role="page-container"></main></div></body>'},templatizer.head=function(){return'<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0"/><meta name="apple-mobile-web-app-capable" content="yes"/>'},templatizer.includes.betfair_root=function(){return'<li class="list-group-item"><a role="eventTypeName"></a></li>'},templatizer.includes.event=function(){return'<li class="list-group-item"><a role="name"></a></li>'},templatizer.pages.event=function(){return'<section class="page view-betfair-root"><h2 role="name"></h2><ul role="events-list" class="list-group"></ul></section>'},templatizer.pages.collectionDemo=function(){return'<section class="page pageOne"><ul role="betfair-roots-list" class="list-group"></ul></section>'},templatizer.pages.eventTypeView=function(){return'<section class="page view-betfair-root"><ul role="events-list" class="list-group"></ul></section>'},templatizer.pages.BetfairRootView=function(){return'<section class="page view-betfair-root"><h2 role="name"></h2><a role="childName"></a><img role="avatar" width="80" height="80"/><div class="buttons"><a role="edit" class="btn">Edit</a><button role="delete" class="btn">Delete</button></div></section>'},templatizer})},{fs:90}],12:[function(require,module){var View=require("ampersand-view"),templates=require("../templates");module.exports=View.extend({template:templates.includes.betfair_root,bindings:{"model.viewUrl":{type:"attribute",role:"eventTypeName",name:"href"},"model.eventType":"[role=eventTypeName]"}})},{"../templates":11,"ampersand-view":67}],13:[function(require,module){var View=require("ampersand-view"),templates=require("../templates");module.exports=View.extend({template:templates.includes.event,bindings:{"model.name":"[role=name]","model.viewEventUrl":{type:"attribute",role:"name",name:"href"}}})},{"../templates":11,"ampersand-view":67}],14:[function(require,module){var View=require("ampersand-view"),ViewSwitcher=require("ampersand-view-switcher"),_=require("underscore"),domify=require("domify"),dom=require("ampersand-dom"),templates=require("../templates"),setFavicon=(require("../helpers/metrics"),require("favicon-setter"));module.exports=View.extend({template:templates.body,initialize:function(){this.listenTo(app.router,"page",this.handleNewPage)},events:{"click a[href]":"handleLinkClick"},render:function(){return document.head.appendChild(domify(templates.head())),this.renderWithTemplate({me:me}),this.pageSwitcher=new ViewSwitcher(this.getByRole("page-container"),{show:function(newView){document.title=_.result(newView,"pageTitle")||"Ampersand Goals",document.scrollTop=0,dom.addClass(newView.el,"active"),app.currentPage=newView}}),setFavicon("/images/ampersand.png"),this},handleNewPage:function(view){this.pageSwitcher.set(view),this.updateActiveNav()},handleLinkClick:function(e){var aTag=e.target,local=aTag.host===window.location.host;!local||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),app.navigate(aTag.pathname))},updateActiveNav:function(){var path=window.location.pathname.slice(1);this.getAll(".nav a[href]").forEach(function(aTag){var aPath=aTag.pathname.slice(1);!aPath&&!path||aPath&&0===path.indexOf(aPath)?dom.addClass(aTag.parentNode,"active"):dom.removeClass(aTag.parentNode,"active")})}})},{"../helpers/metrics":2,"../templates":11,"ampersand-dom":15,"ampersand-view":67,"ampersand-view-switcher":66,domify:96,"favicon-setter":98,underscore:99}],15:[function(require,module){function getString(val){return val||0===val?val:""}function hasClass(el,cls){return el.classList?el.classList.contains(cls):new RegExp("(^| )"+cls+"( |$)","gi").test(el.className)}function isHidden(el){return"true"===dom.getAttribute(el,"data-anddom-hidden")}function storeDisplayStyle(el){dom.setAttribute(el,"data-anddom-display",el.style.display)}function show(el){el.style.display=dom.getAttribute(el,"data-anddom-display")||"",dom.removeAttribute(el,"data-anddom-hidden")}function hide(el){dom.setAttribute(el,"data-anddom-hidden","true"),el.style.display="none"}var dom=module.exports={text:function(el,val){el.textContent=getString(val)},addClass:function(el,cls){cls=getString(cls),cls&&(el.classList?el.classList.add(cls):hasClass(el,cls)||(el.classList?el.classList.add(cls):el.className+=" "+cls))},removeClass:function(el,cls){el.classList?el.classList.remove(getString(cls)):el.className=el.className.replace(new RegExp("(^|\\b)"+cls.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:hasClass,switchClass:function(el,prevCls,newCls){prevCls&&this.removeClass(el,prevCls),this.addClass(el,newCls)},addAttribute:function(el,attr){el.setAttribute(attr,"")},removeAttribute:function(el,attr){el.removeAttribute(attr)},setAttribute:function(el,attr,value){el.setAttribute(attr,getString(value))},getAttribute:function(el,attr){return el.getAttribute(attr)},hide:function(el){isHidden(el)||(storeDisplayStyle(el),hide(el))},show:function(el){show(el)},html:function(el,content){el.innerHTML=content}}},{}],16:[function(require,module){var State=require("ampersand-state"),_=require("underscore"),sync=require("ampersand-sync"),Model=State.extend({save:function(key,val,options){{var attrs,method,xhr;this.attributes}if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){var serverAttrs=model.parse(resp,options);return options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options)?!1:(success&&success(model,resp,options),void model.trigger("sync",model,resp,options))},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method&&(options.attrs=attrs),options.wait&&(options.attrs=_.extend(model.serialize(),attrs)),xhr=this.sync(method,this,options)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){return model.set(model.parse(resp,options),options)?(success&&success(model,resp,options),void model.trigger("sync",model,resp,options)):!1},wrapError(this,options),this.sync("read",this,options)},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},sync:function(){return sync.apply(this,arguments)},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base+("/"===base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.getId())}}),urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}};module.exports=Model},{"ampersand-state":17,"ampersand-sync":22,underscore:99}],17:[function(require,module){function Base(attrs,options){options||(options={}),this.cid||(this.cid=_.uniqueId("state")),this._events={},this._values={},this._definition=Object.create(this._definition),options.parse&&(attrs=this.parse(attrs,options)),this.parent=options.parent,this.collection=options.collection,this._keyTree=new KeyTree,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},attrs&&this.set(attrs,_.extend({silent:!0,initial:!0},options)),this._changed={},this._derived&&this._initDerived(),options.init!==!1&&this.initialize.apply(this,arguments)}function createPropertyDefinition(object,name,desc,isSession){var type,descArray,def=object._definition[name]={};if(_.isString(desc))type=object._ensureValidType(desc),type&&(def.type=type);else{if(_.isArray(desc)&&(descArray=desc,desc={type:descArray[0],required:descArray[1],"default":descArray[2]}),type=object._ensureValidType(desc.type),type&&(def.type=type),desc.required&&(def.required=!0),desc.default&&"object"==typeof desc.default)throw new TypeError("The default value for "+name+" cannot be an object/array, must be a value or a function which returns a value/object/array");def.default=desc.default,def.allowNull=desc.allowNull?desc.allowNull:!1,desc.setOnce&&(def.setOnce=!0),def.required&&_.isUndefined(def.default)&&(def.default=object._getDefaultForType(type)),def.test=desc.test,def.values=desc.values}return isSession&&(def.session=!0),Object.defineProperty(object,name,{set:function(val){this.set(name,val)},get:function(){var result=this._values[name],typeDef=this._dataTypes[def.type];return"undefined"!=typeof result?(typeDef&&typeDef.get&&(result=typeDef.get(result)),result):_.result(def,"default")}}),def}function createDerivedProperty(modelProto,name,definition){var def=modelProto._derived[name]={fn:_.isFunction(definition)?definition:definition.fn,cache:definition.cache!==!1,depList:definition.deps||[]};_.each(def.depList,function(dep){modelProto._deps[dep]=_(modelProto._deps[dep]||[]).union([name])}),Object.defineProperty(modelProto,name,{get:function(){return this._getDerivedProperty(name)},set:function(){throw new TypeError('"'+name+"\" is a derived property, it can't be set directly.")}})}function extend(protoProps){var child,parent=this,args=[].slice.call(arguments);child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,child.prototype._derived=_.extend({},parent.prototype._derived),child.prototype._deps=_.extend({},parent.prototype._deps),child.prototype._definition=_.extend({},parent.prototype._definition),child.prototype._collections=_.extend({},parent.prototype._collections),child.prototype._children=_.extend({},parent.prototype._children),child.prototype._dataTypes=_.extend({},parent.prototype._dataTypes||dataTypes),protoProps&&args.forEach(function(def){def.dataTypes&&(_.each(def.dataTypes,function(def,name){child.prototype._dataTypes[name]=def}),delete def.dataTypes),def.props&&(_.each(def.props,function(def,name){createPropertyDefinition(child.prototype,name,def)}),delete def.props),def.session&&(_.each(def.session,function(def,name){createPropertyDefinition(child.prototype,name,def,!0)}),delete def.session),def.derived&&(_.each(def.derived,function(def,name){createDerivedProperty(child.prototype,name,def)}),delete def.derived),def.collections&&(_.each(def.collections,function(constructor,name){child.prototype._collections[name]=constructor}),delete def.collections),def.children&&(_.each(def.children,function(constructor,name){child.prototype._children[name]=constructor}),delete def.children),_.extend(child.prototype,def)});Object.prototype.toString;return child.__super__=parent.prototype,child}var _=require("underscore"),BBEvents=require("backbone-events-standalone"),KeyTree=require("key-tree-store"),arrayNext=require("array-next"),changeRE=/^change:/;_.extend(Base.prototype,BBEvents,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(attr){return _.escape(this.get(attr))},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},parse:function(resp){return resp},serialize:function(){var res=this.getAttributes({props:!0},!0);return _.each(this._children,function(value,key){res[key]=this[key].serialize()},this),_.each(this._collections,function(value,key){res[key]=this[key].serialize()},this),res},set:function(key,value,options){var changing,changes,newType,newVal,def,cast,err,attr,attrs,dataType,silent,unset,currentVal,initial,hasChanged,isEqual,self=this,extraProperties=this.extraProperties;if(_.isObject(key)||null===key?(attrs=key,options=value):(attrs={},attrs[key]=value),options=options||{},!this._validate(attrs,options))return!1;unset=options.unset,silent=options.silent,initial=options.initial,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=this.attributes,this._changed={});for(attr in attrs){if(newVal=attrs[attr],newType=typeof newVal,currentVal=this._values[attr],def=this._definition[attr],!def){if(this._children[attr]||this._collections[attr]){this[attr].set(newVal,options);continue}if("ignore"===extraProperties)continue;if("reject"===extraProperties)throw new TypeError('No "'+attr+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');"allow"===extraProperties&&(def=this._createPropertyDefinition(attr,"any"))}if(isEqual=this._getCompareForType(def.type),dataType=this._dataTypes[def.type],dataType&&dataType.set&&(cast=dataType.set(newVal),newVal=cast.val,newType=cast.type),def.test&&(err=def.test.call(this,newVal,newType)))throw new TypeError("Property '"+attr+"' failed validation with error: "+err);if(_.isUndefined(newVal)&&def.required)throw new TypeError("Required property '"+attr+"' must be of type "+def.type+". Tried to set "+newVal);if(_.isNull(newVal)&&def.required&&!def.allowNull)throw new TypeError("Property '"+attr+"' must be of type "+def.type+" (cannot be null). Tried to set "+newVal);if(def.type&&"any"!==def.type&&def.type!==newType&&!_.isNull(newVal)&&!_.isUndefined(newVal))throw new TypeError("Property '"+attr+"' must be of type "+def.type+". Tried to set "+newVal);if(def.values&&!_.contains(def.values,newVal))throw new TypeError("Property '"+attr+"' must be one of values: "+def.values.join(", "));if(hasChanged=!isEqual(currentVal,newVal,attr),def.setOnce&&void 0!==currentVal&&hasChanged)throw new TypeError("Property '"+key+"' can only be set once.");hasChanged?(changes.push({prev:currentVal,val:newVal,key:attr}),self._changed[attr]=newVal):delete self._changed[attr]}if(_.each(changes,function(change){self._previousAttributes[change.key]=change.prev,unset?delete self._values[change.key]:self._values[change.key]=change.val}),!silent&&changes.length&&(self._pending=!0),silent||_.each(changes,function(change){self.trigger("change:"+change.key,self,change.val,options)}),changing)return this;if(!silent)for(;this._pending;)this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},get:function(attr){return this[attr]},toggle:function(property){var def=this._definition[property];if("boolean"===def.type)this[property]=!this[property];else{if(!def||!def.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[property]=arrayNext(def.values,this[property])}return this},previousAttributes:function(){return _.clone(this._previousAttributes)},hasChanged:function(attr){return null==attr?!_.isEmpty(this._changed):_.has(this._changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this._changed):!1;var val,def,isEqual,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)def=this._definition[attr],isEqual=this._getCompareForType(def&&def.type),isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},toJSON:function(){return this.serialize()},unset:function(attr,options){{var val,def=this._definition[attr];def.type}return def.required?(val=_.result(def,"default"),this.set(attr,val,options)):this.set(attr,val,_.extend({},options,{unset:!0}))},clear:function(options){var self=this;return _.each(_.keys(this.attributes),function(key){self.unset(key,options)}),this},previous:function(attr){return null!=attr&&Object.keys(this._previousAttributes).length?this._previousAttributes[attr]:null},_getDefaultForType:function(type){var dataType=this._dataTypes[type];return dataType&&dataType.default},_getCompareForType:function(type){var dataType=this._dataTypes[type];return dataType&&dataType.compare?_.bind(dataType.compare,this):_.isEqual},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return error?(this.trigger("invalid",this,error,_.extend(options||{},{validationError:error})),!1):!0},_createPropertyDefinition:function(name,desc,isSession){return createPropertyDefinition(this,name,desc,isSession)},_ensureValidType:function(type){return _.contains(["string","number","boolean","array","object","date","any"].concat(_.keys(this._dataTypes)),type)?type:void 0},getAttributes:function(options,raw){options||(options={}),_.defaults(options,{session:!1,props:!1,derived:!1});var val,item,def,res={};for(item in this._definition)def=this._definition[item],(options.session&&def.session||options.props&&!def.session)&&(val=raw?this._values[item]:this[item],"undefined"==typeof val&&(val=_.result(def,"default")),"undefined"!=typeof val&&(res[item]=val));if(options.derived)for(item in this._derived)res[item]=this[item];return res},_initDerived:function(){var self=this;_.each(this._derived,function(value,name){var def=self._derived[name];def.deps=def.depList;var update=function(options){options=options||{};var newVal=def.fn.call(self);self._cache[name]===newVal&&def.cache||(def.cache&&(self._previousAttributes[name]=self._cache[name]),self._cache[name]=newVal,self.trigger("change:"+name,self,self._cache[name]))};def.deps.forEach(function(propString){self._keyTree.add(propString,update)})}),this.on("all",function(eventName){changeRE.test(eventName)&&self._keyTree.get(eventName.split(":")[1]).forEach(function(fn){fn()})},this)},_getDerivedProperty:function(name,flushCache){return this._derived[name].cache?((flushCache||!this._cache.hasOwnProperty(name))&&(this._cache[name]=this._derived[name].fn.apply(this)),this._cache[name]):this._derived[name].fn.apply(this)},_initCollections:function(){var coll;if(this._collections)for(coll in this._collections)this[coll]=new this._collections[coll]([],{parent:this})},_initChildren:function(){var child;if(this._children)for(child in this._children)this[child]=new this._children[child]({},{parent:this}),this.listenTo(this[child],"all",this._getEventBubblingHandler(child))},_getEventBubblingHandler:function(propertyName){return _.bind(function(name,model,newValue){changeRE.test(name)?this.trigger("change:"+propertyName+"."+name.split(":")[1],model,newValue):"change"===name&&this.trigger("change",this)},this)},_verifyRequired:function(){var attrs=this.attributes;for(var def in this._definition)if(this._definition[def].required&&"undefined"==typeof attrs[def])return!1;return!0}}),Object.defineProperties(Base.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var dataTypes={string:{"default":function(){return""}},date:{set:function(newVal){var newType;if(_.isDate(newVal))newType="date",newVal=newVal.valueOf();else try{if(newVal=new Date(parseInt(newVal,10)),!_.isDate(newVal))throw TypeError;if(newVal=newVal.valueOf(),_.isNaN(newVal))throw TypeError;newType="date"}catch(e){newType=typeof newVal}return{val:newVal,type:newType}},get:function(val){return new Date(val)},"default":function(){return new Date}},array:{set:function(newVal){return{val:newVal,type:_.isArray(newVal)?"array":typeof newVal}},"default":function(){return[]}},object:{set:function(newVal){var newType=typeof newVal;return"object"!==newType&&_.isUndefined(newVal)&&(newVal=null,newType="object"),{val:newVal,type:newType}},"default":function(){return{}}},state:{set:function(newVal){var isInstance=newVal instanceof Base||newVal&&newVal.isState;return isInstance?{val:newVal,type:"state"}:{val:newVal,type:typeof newVal}},compare:function(currentVal,newVal,attributeName){var isSame=currentVal===newVal;return isSame||(this.stopListening(currentVal),null!=newVal&&this.listenTo(newVal,"all",this._getEventBubblingHandler(attributeName))),isSame}}};Base.extend=extend,module.exports=Base},{"array-next":18,"backbone-events-standalone":20,"key-tree-store":21,underscore:99}],18:[function(require,module){module.exports=function(array,currentItem){var len=array.length,newIndex=array.indexOf(currentItem)+1;return newIndex>len-1&&(newIndex=0),array[newIndex]}},{}],19:[function(require,module,exports){!function(){function miniscore(){return{keys:Object.keys,uniqueId:function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},has:function(obj,key){return hasOwnProperty.call(obj,key)},each:function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(this.has(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return},once:function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}}}}var Events,root=this,breaker={},nativeForEach=Array.prototype.forEach,hasOwnProperty=Object.prototype.hasOwnProperty,slice=Array.prototype.slice,idCounter=0,_=miniscore();Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;
var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events={},this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeners=this._listeners;if(!listeners)return this;var deleteListener=!name&&!callback;"object"==typeof name&&(callback=this),obj&&((listeners={})[obj._listenerId]=obj);for(var id in listeners)listeners[id].off(name,callback,this),deleteListener&&delete this._listeners[id];return this}};var eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args)}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeners=this._listeners||(this._listeners={}),id=obj._listenerId||(obj._listenerId=_.uniqueId("l"));return listeners[id]=obj,"object"==typeof name&&(callback=this),obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,Events.mixin=function(proto){var exports=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return _.each(exports,function(name){proto[name]=this[name]},this),proto},"function"==typeof define?define(function(){return Events}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Events),exports.BackboneEvents=Events):root.BackboneEvents=Events}(this)},{}],20:[function(require,module){module.exports=require("./backbone-events-standalone")},{"./backbone-events-standalone":19}],21:[function(require,module){function KeyTreeStore(){this.storage={}}KeyTreeStore.prototype.add=function(keypath,obj){var arr=this.storage[keypath]||(this.storage[keypath]=[]);arr.push(obj)},KeyTreeStore.prototype.remove=function(obj){var path,arr;for(path in this.storage)arr=this.storage[path],arr.some(function(item,index){return item===obj?(arr.splice(index,1),!0):void 0})},KeyTreeStore.prototype.get=function(keypath){var key,res=[];for(key in this.storage)(keypath===key||0===key.indexOf(keypath+"."))&&(res=res.concat(this.storage[key]));return res},module.exports=KeyTreeStore},{}],22:[function(require,module){var _=require("underscore"),xhr=require("xhr"),qs=require("qs"),urlError=function(){throw new Error('A "url" property or function must be specified')};module.exports=function(method,model,options){var type=methodMap[method],headers={};_.defaults(options||(options={}),{emulateHTTP:!1,emulateJSON:!1});var params={type:type};options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.json=options.attrs||model.toJSON(options)),options.data&&"GET"===type&&(params.url+=_.contains(params.url,"?")?"&":"?",params.url+=qs.stringify(options.data)),options.emulateJSON&&(headers["Content-Type"]="application/x-www-form-urlencoded",params.body=params.json?{model:params.json}:{},delete params.json),!options.emulateHTTP||"PUT"!==type&&"DELETE"!==type&&"PATCH"!==type||(params.type="POST",options.emulateJSON&&(params.body._method=type),headers["X-HTTP-Method-Override"]=type),options.emulateJSON&&(params.body=qs.stringify(params.body));var ajaxConfig=_.result(model,"ajaxConfig")||{};if(ajaxConfig.headers&&_.extend(headers,ajaxConfig.headers),params.headers=headers,ajaxConfig.useXDR&&(params.useXDR=!0),ajaxConfig.xhrFields){var beforeSend=ajaxConfig.beforeSend;params.beforeSend=function(req){for(var key in ajaxConfig.xhrFields)req[key]=ajaxConfig.xhrFields[key];return beforeSend?beforeSend.apply(this,arguments):void 0},params.xhrFields=ajaxConfig.xhrFields}params.method=params.type;var ajaxSettings=_.extend(params,options),request=options.xhr=xhr(ajaxSettings,function(err,resp,body){if(err&&options.error)return options.error(resp,"error",err.message);if(body&&"string"==typeof body)try{body=JSON.parse(body)}catch(e){}return options.success?options.success(body,"success",resp):void 0});return model.trigger("request",model,request,options,ajaxSettings),request.ajaxSettings=ajaxSettings,request};var methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"}},{qs:23,underscore:28,xhr:29}],23:[function(require,module){module.exports=require("./lib")},{"./lib":24}],24:[function(require,module){var Stringify=require("./stringify"),Parse=require("./parse");module.exports={stringify:Stringify,parse:Parse}},{"./parse":25,"./stringify":26}],25:[function(require,module){var Utils=require("./utils"),internals={delimiter:"&",depth:5,arrayLimit:20,parametersLimit:1e3};internals.parseValues=function(str,delimiter){delimiter="string"==typeof delimiter?delimiter:internals.delimiter;for(var obj={},parts=str.split(delimiter,internals.parametersLimit),i=0,il=parts.length;il>i;++i){var part=parts[i],pos=-1===part.indexOf("]=")?part.indexOf("="):part.indexOf("]=")+1;if(-1===pos)obj[Utils.decode(part)]="";else{var key=Utils.decode(part.slice(0,pos)),val=Utils.decode(part.slice(pos+1));obj[key]=obj[key]?[].concat(obj[key]).concat(val):val}}return obj},internals.parseObject=function(chain,val){if(!chain.length)return val;var root=chain.shift(),obj={};if("[]"===root)obj=[],obj=obj.concat(internals.parseObject(chain,val));else{var cleanRoot="["===root[0]&&"]"===root[root.length-1]?root.slice(1,root.length-1):root,index=parseInt(cleanRoot,10);!isNaN(index)&&root!==cleanRoot&&index<=internals.arrayLimit?(obj=[],obj[index]=internals.parseObject(chain,val)):obj[cleanRoot]=internals.parseObject(chain,val)}return obj},internals.parseKeys=function(key,val,depth){if(key){var parent=/^([^\[\]]*)/,child=/(\[[^\[\]]*\])/g,segment=parent.exec(key);if(!Object.prototype.hasOwnProperty(segment[1])){var keys=[];segment[1]&&keys.push(segment[1]);for(var i=0;null!==(segment=child.exec(key))&&depth>i;)++i,Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,""))||keys.push(segment[1]);return segment&&keys.push("["+key.slice(segment.index)+"]"),internals.parseObject(keys,val)}}},module.exports=function(str,depth,delimiter){if(""===str||null===str||"undefined"==typeof str)return{};"number"!=typeof depth&&(delimiter=depth,depth=internals.depth);var tempObj="string"==typeof str?internals.parseValues(str,delimiter):Utils.clone(str),obj={};for(var key in tempObj)if(tempObj.hasOwnProperty(key)){var newObj=internals.parseKeys(key,tempObj[key],depth);obj=Utils.merge(obj,newObj)}return Utils.compact(obj)}},{"./utils":27}],26:[function(require,module){(function(Buffer){var internals={delimiter:"&"};internals.stringify=function(obj,prefix){if(Buffer.isBuffer(obj)?obj=obj.toString():obj instanceof Date?obj=obj.toISOString():null===obj&&(obj=""),"string"==typeof obj||"number"==typeof obj||"boolean"==typeof obj)return[encodeURIComponent(prefix)+"="+encodeURIComponent(obj)];var values=[];for(var key in obj)obj.hasOwnProperty(key)&&(values=values.concat(internals.stringify(obj[key],prefix+"["+key+"]")));return values},module.exports=function(obj,delimiter){delimiter="undefined"==typeof delimiter?internals.delimiter:delimiter;var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&(keys=keys.concat(internals.stringify(obj[key],key)));return keys.join(delimiter)}}).call(this,require("buffer").Buffer)},{buffer:91}],27:[function(require,module,exports){(function(Buffer){exports.arrayToObject=function(source){for(var obj={},i=0,il=source.length;il>i;++i)"undefined"!=typeof source[i]&&(obj[i]=source[i]);return obj},exports.clone=function(source){if("object"!=typeof source||null===source)return source;if(Buffer.isBuffer(source))return source.toString();var obj=Array.isArray(source)?[]:{};for(var i in source)source.hasOwnProperty(i)&&(obj[i]=exports.clone(source[i]));return obj},exports.merge=function(target,source){if(!source)return target;var obj=exports.clone(target);if(Array.isArray(source)){for(var i=0,il=source.length;il>i;++i)"undefined"!=typeof source[i]&&(obj[i]="object"==typeof obj[i]?exports.merge(obj[i],source[i]):source[i]);return obj}Array.isArray(obj)&&(obj=exports.arrayToObject(obj));for(var keys=Object.keys(source),k=0,kl=keys.length;kl>k;++k){var key=keys[k],value=source[key];obj[key]=value&&"object"==typeof value?obj[key]?exports.merge(obj[key],value):exports.clone(value):value}return obj},exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}},exports.compact=function(obj){if("object"!=typeof obj||null===obj)return obj;var compacted={};for(var key in obj)if(obj.hasOwnProperty(key))if(Array.isArray(obj[key])){compacted[key]=[];for(var i=0,l=obj[key].length;l>i;i++)"undefined"!=typeof obj[key][i]&&compacted[key].push(obj[key][i])}else compacted[key]=exports.compact(obj[key]);return compacted}}).call(this,require("buffer").Buffer)},{buffer:91}],28:[function(require,module,exports){(function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.6.0";var each=_.each=_.forEach=function(obj,iterator,context){if(null==obj)return obj;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return;return obj};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results)};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){index=keys?keys[--length]:--length,initial?memo=iterator.call(context,memo,obj[index],index,list):(memo=obj[index],initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,predicate,context){var result;return any(obj,function(value,index,list){return predicate.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,predicate,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(predicate,context):(each(obj,function(value,index,list){predicate.call(context,value,index,list)&&results.push(value)}),results)},_.reject=function(obj,predicate,context){return _.filter(obj,function(value,index,list){return!predicate.call(context,value,index,list)},context)},_.every=_.all=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(predicate,context):(each(obj,function(value,index,list){return(result=result&&predicate.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(predicate,context):(each(obj,function(value,index,list){return result||(result=predicate.call(context,value,index,list))?breaker:void 0}),!!result)};_.contains=_.include=function(obj,target){return null==obj?!1:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);var result=-1/0,lastComputed=-1/0;return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>lastComputed&&(result=value,lastComputed=computed)}),result},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);var result=1/0,lastComputed=1/0;return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;lastComputed>computed&&(result=value,lastComputed=computed)}),result},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sample=function(obj,n,guard){return null==n||guard?(obj.length!==+obj.length&&(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return null==value?_.identity:_.isFunction(value)?value:_.property(value)};_.sortBy=function(obj,iterator,context){return iterator=lookupIterator(iterator),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iterator,context){var result={};return iterator=lookupIterator(iterator),each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:0>n?[]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){return shallow&&_.every(input,_.isArray)?concat.apply(output,input):(each(input,function(value){_.isArray(value)||_.isArguments(value)?shallow?push.apply(output,value):flatten(value,shallow,output):output.push(value)}),output)};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.partition=function(array,predicate){var pass=[],fail=[];return each(array,function(elem){(predicate(elem)?pass:fail).push(elem)}),[pass,fail]},_.uniq=_.unique=function(array,isSorted,iterator,context){_.isFunction(isSorted)&&(context=iterator,iterator=isSorted,isSorted=!1);var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){(isSorted?index&&seen[seen.length-1]===value:_.contains(seen,value))||(seen.push(value),results.push(array[index]))}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.contains(other,item)})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){for(var position=0,args=boundArgs.slice(),i=0,length=args.length;length>i;i++)args[i]===_&&(args[i]=arguments[position++]);for(;position<arguments.length;)args.push(arguments[position++]);return func.apply(this,args)}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:_.now(),timeout=null,result=func.apply(context,args),context=args=null};return function(){var now=_.now();previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args),context=args=null):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),context=args=null))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)_.contains(keys,key)||(copy[key]=obj[key]);return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.property=function(key){return function(obj){return obj[key]}},_.matches=function(attrs){return function(obj){if(obj===attrs)return!0;for(var key in attrs)if(attrs[key]!==obj[key])return!1;return!0}},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){return null==string?"":(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape&&(source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"),interpolate&&(source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"),evaluate&&(source+="';\n"+evaluate+"\n__p+='"),index=offset+match.length,match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!=name&&"splice"!=name||0!==obj.length||delete obj[0],result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)},{}],29:[function(require,module){function createXHR(options,callback){function readystatechange(){4===xhr.readyState&&load()}function getBody(){var body=null;if(xhr.response?body=xhr.response:"text"!==xhr.responseType&&xhr.responseType||(body=xhr.responseText||xhr.responseXML),isJson)try{body=JSON.parse(body)}catch(e){}return body}function getStatusCode(){return 1223===xhr.status?204:xhr.status}function errorFromStatusCode(status){var error=null;if(0===status||status>=400&&600>status){var message=("string"==typeof body?body:!1)||messages[String(status).charAt(0)];error=new Error(message),error.statusCode=status}return error}function loadResponse(){var status=getStatusCode(),error=errorFromStatusCode(status),response={body:getBody(),statusCode:status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders())};callback(error,response,response.body)}function loadXhr(){var status=getStatusCode(),error=errorFromStatusCode(status);xhr.status=xhr.statusCode=status,xhr.body=getBody(),callback(error,xhr,xhr.body)}function error(evt){callback(evt,xhr)}"string"==typeof options&&(options={uri:options}),options=options||{},callback=once(callback);var xhr=options.xhr||null;xhr||(xhr=options.cors||options.useXDR?new XDR:new XHR);var key,uri=xhr.url=options.uri||options.url,method=xhr.method=options.method||"GET",body=options.body||options.data,headers=xhr.headers=options.headers||{},sync=!!options.sync,isJson=!1,load=options.response?loadResponse:loadXhr;if("json"in options&&(isJson=!0,headers.Accept="application/json","GET"!==method&&"HEAD"!==method&&(headers["Content-Type"]="application/json",body=JSON.stringify(options.json))),xhr.onreadystatechange=readystatechange,xhr.onload=load,xhr.onerror=error,xhr.onprogress=function(){},xhr.ontimeout=noop,xhr.open(method,uri,!sync),(options.withCredentials||options.cors&&options.withCredentials!==!1)&&(xhr.withCredentials=!0),sync||(xhr.timeout="timeout"in options?options.timeout:5e3),xhr.setRequestHeader)for(key in headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);
else if(options.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in options&&(xhr.responseType=options.responseType),"beforeSend"in options&&"function"==typeof options.beforeSend&&options.beforeSend(xhr),xhr.send(body),xhr}function noop(){}var window=require("global/window"),once=require("once"),parseHeaders=require("parse-headers"),messages={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},XHR=window.XMLHttpRequest||noop,XDR="withCredentials"in new XHR?XHR:window.XDomainRequest;module.exports=createXHR},{"global/window":30,once:31,"parse-headers":35}],30:[function(require,module){(function(global){module.exports="undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(require,module){function once(fn){var called=!1;return function(){return called?void 0:(called=!0,fn.apply(this,arguments))}}module.exports=once,once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0})})},{}],32:[function(require,module){function forEach(list,iterator,context){if(!isFunction(iterator))throw new TypeError("iterator must be a function");arguments.length<3&&(context=this),"[object Array]"===toString.call(list)?forEachArray(list,iterator,context):"string"==typeof list?forEachString(list,iterator,context):forEachObject(list,iterator,context)}function forEachArray(array,iterator,context){for(var i=0,len=array.length;len>i;i++)hasOwnProperty.call(array,i)&&iterator.call(context,array[i],i,array)}function forEachString(string,iterator,context){for(var i=0,len=string.length;len>i;i++)iterator.call(context,string.charAt(i),i,string)}function forEachObject(object,iterator,context){for(var k in object)hasOwnProperty.call(object,k)&&iterator.call(context,object[k],k,object)}var isFunction=require("is-function");module.exports=forEach;var toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty},{"is-function":33}],33:[function(require,module){function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString},{}],34:[function(require,module,exports){function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(str){return str.replace(/^\s*/,"")},exports.right=function(str){return str.replace(/\s*$/,"")}},{}],35:[function(require,module){var trim=require("trim"),forEach=require("for-each");module.exports=function(headers){if(!headers)return{};var result={};return forEach(trim(headers).split("\n"),function(row){var index=row.indexOf(":");result[trim(row.slice(0,index)).toLowerCase()]=trim(row.slice(index+1))}),result}},{"for-each":32,trim:34}],36:[function(require,module){var Collection=require("ampersand-collection"),underscoreMixin=require("ampersand-collection-underscore-mixin"),restMixins=require("ampersand-collection-rest-mixin");module.exports=Collection.extend(underscoreMixin,restMixins)},{"ampersand-collection":54,"ampersand-collection-rest-mixin":37,"ampersand-collection-underscore-mixin":53}],37:[function(require,module){var sync=require("ampersand-sync"),extend=require("extend-object"),wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}};module.exports={fetch:function(options){options=options?extend({},options):{},void 0===options.parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?extend({},options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},sync:function(){return sync.apply(this,arguments)},getOrFetch:function(id,options,cb){function done(){var model=self.get(id);model?cb&&cb(null,model):cb(new Error("not found"))}3!==arguments.length&&(cb=options,options={});var self=this,model=this.get(id);return model?cb(null,model):void(options.all?this.fetch({success:done,error:done}):this.fetchById(id,cb))},fetchById:function(id,cb){var self=this,idObj={};idObj[this.model.prototype.idAttribute]=id;var model=new this.model(idObj,{collection:this});model.fetch({success:function(){self.add(model),cb&&cb(null,model)},error:function(){delete model.collection,cb&&cb(Error("not found"))}})}}},{"ampersand-sync":38,"extend-object":52}],38:[function(require,module){module.exports=require(22)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/ampersand-sync.js":22,qs:39,underscore:44,xhr:45}],39:[function(require,module){module.exports=require(23)},{"./lib":40,"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/index.js":23}],40:[function(require,module){module.exports=require(24)},{"./parse":41,"./stringify":42,"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/index.js":24}],41:[function(require,module){module.exports=require(25)},{"./utils":43,"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/parse.js":25}],42:[function(require,module){module.exports=require(26)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/stringify.js":26,buffer:91}],43:[function(require,module){module.exports=require(27)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/utils.js":27,buffer:91}],44:[function(require,module){module.exports=require(28)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js":28}],45:[function(require,module){module.exports=require(29)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/index.js":29,"global/window":46,once:47,"parse-headers":51}],46:[function(require,module){module.exports=require(30)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/global/window.js":30}],47:[function(require,module){module.exports=require(31)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/once/once.js":31}],48:[function(require,module){module.exports=require(32)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js":32,"is-function":49}],49:[function(require,module){module.exports=require(33)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js":33}],50:[function(require,module){module.exports=require(34)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js":34}],51:[function(require,module){module.exports=require(35)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/parse-headers.js":35,"for-each":48,trim:50}],52:[function(require,module){var arr=[],each=arr.forEach,slice=arr.slice;module.exports=function(obj){return each.call(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj}},{}],53:[function(require,module){var _=require("underscore"),slice=[].slice,mixins={},methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];_.each(methods,function(method){_[method]&&(mixins[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)})});var attributeMethods=["groupBy","countBy","sortBy","indexBy"];_.each(attributeMethods,function(method){_[method]&&(mixins[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get?model.get(value):model[value]};return _[method](this.models,iterator,context)})}),mixins.where=function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){var value;for(var key in attrs)if(value=model.get?model.get(key):model[key],attrs[key]!==value)return!1;return!0})},mixins.findWhere=function(attrs){return this.where(attrs,!0)},mixins.pluck=function(attr){return _.invoke(this.models,"get",attr)},module.exports=mixins},{underscore:99}],54:[function(require,module){function Collection(models,options){options||(options={}),options.model&&(this.model=options.model),options.comparator&&(this.comparator=options.comparator),options.parent&&(this.parent=options.parent),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,extend({silent:!0},options))}var BackboneEvents=require("backbone-events-standalone"),classExtend=require("ampersand-class-extend"),isArray=require("is-array"),extend=require("extend-object"),slice=[].slice;extend(Collection.prototype,BackboneEvents,{initialize:function(){},mainIndex:"id",indexes:[],isModel:function(model){return this.model&&model instanceof this.model},add:function(models,options){return this.set(models,extend({merge:!1,add:!0,remove:!1},options))},parse:function(res){return res},serialize:function(){return this.map(function(model){if(model.serialize)return model.serialize();var out={};return extend(out,model),delete out.collection,out})},toJSON:function(){return this.serialize()},set:function(models,options){options=extend({add:!0,remove:!0,merge:!0},options),options.parse&&(models=this.parse(models,options));var singular=!isArray(models);models=singular?models?[models]:[]:models.slice();var id,model,attrs,existing,sort,i,length,at=options.at,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr="string"==typeof this.comparator?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!sortable&&add&&remove?[]:!1,targetProto=this.model&&this.model.prototype||Object.prototype;for(i=0,length=models.length;length>i;i++){if(attrs=models[i]||{},id=this.isModel(attrs)?model=attrs:targetProto.generateId?targetProto.generateId(attrs):attrs[targetProto.idAttribute||"id"],existing=this.get(id))remove&&(modelMap[existing.cid||existing.id]=!0),merge&&(attrs=attrs===model?model.attributes:attrs,options.parse&&(attrs=existing.parse(attrs,options)),existing.set?(existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0)):extend(existing,attrs)),models[i]=existing;else if(add){if(model=models[i]=this._prepareModel(attrs,options),!model)continue;toAdd.push(model),this._addReference(model,options)}model=existing||model,model&&(order&&(model.isNew&&model.isNew()||!model.id||!modelMap[model.cid||model.id])&&order.push(model),modelMap[model.id]=!0)}if(remove){for(i=0,length=this.length;length>i;i++)model=this.models[i],modelMap[model.cid||model.id]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length||order&&order.length)if(sortable&&(sort=!0),null!=at)for(i=0,length=toAdd.length;length>i;i++)this.models.splice(at+i,0,toAdd[i]);else{var orderedModels=order||toAdd;for(i=0,length=orderedModels.length;length>i;i++)this.models.push(orderedModels[i])}if(sort&&this.sort({silent:!0}),!options.silent){for(i=0,length=toAdd.length;length>i;i++)model=toAdd[i],model.trigger?model.trigger("add",model,this,options):this.trigger("add",model,this,options);(sort||order&&order.length)&&this.trigger("sort",this,options)}return singular?models[0]:models},get:function(query,indexName){if(query){var index=this._indexes[indexName||this.mainIndex];return index[query]||index[query[this.mainIndex]]||this._indexes.cid[query.cid]}},at:function(index){return this.models[index]},remove:function(models,options){var i,length,model,index,singular=!isArray(models);for(models=singular?[models]:slice.call(models),options||(options={}),i=0,length=models.length;length>i;i++)model=models[i]=this.get(models[i]),model&&(this._deIndex(model),index=this.models.indexOf(model),this.models.splice(index,1),options.silent||(options.index=index,model.trigger?model.trigger("remove",model,this,options):this.trigger("remove",model,this,options)),this._removeReference(model,options));return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,length=this.models.length;length>i;i++)this._removeReference(this.models[i],options);return options.previousModels=this.models,this._reset(),models=this.add(models,extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),models},sort:function(options){var self=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),this.models.sort("string"==typeof this.comparator?function(left,right){return left.get?(left=left.get(self.comparator),right=right.get(self.comparator)):(left=left[self.comparator],right=right[self.comparator]),left>right||void 0===left?1:right>left||void 0===right?-1:0}:1===this.comparator.length?function(left,right){return left=self.comparator(left),right=self.comparator(right),left>right||void 0===left?1:right>left||void 0===right?-1:0}:this.comparator.bind(this)),options.silent||this.trigger("sort",this,options),this},_reset:function(){var list=this.indexes||[],i=0;list.push(this.mainIndex),list.push("cid");var l=list.length;for(this.models=[],this._indexes={};l>i;i++)this._indexes[list[i]]={}},_prepareModel:function(attrs,options){return this.model?this.isModel(attrs)?attrs:(options=options?extend({},options):{},options.collection=this,new this.model(attrs,options)):attrs},_deIndex:function(model){for(var name in this._indexes)delete this._indexes[name][model[name]||model.get&&model.get(name)]},_index:function(model){for(var name in this._indexes){var indexVal=model[name]||model.get&&model.get(name);indexVal&&(this._indexes[name][indexVal]=model)}},_addReference:function(model){this._index(model),model.collection||(model.collection=this),model.on&&model.on("all",this._onModelEvent,this)},_removeReference:function(model){this===model.collection&&delete model.collection,this._deIndex(model),model.off&&model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(this._deIndex(model),this._index(model)),this.trigger.apply(this,arguments))}}),Object.defineProperties(Collection.prototype,{length:{get:function(){return this.models.length}},isCollection:{value:!0}});var arrayMethods=["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"];arrayMethods.forEach(function(method){Collection.prototype[method]=function(){return this.models[method].apply(this.models,arguments)}}),Collection.prototype.each=Collection.prototype.forEach,Collection.extend=classExtend,module.exports=Collection},{"ampersand-class-extend":55,"backbone-events-standalone":57,"extend-object":58,"is-array":59}],55:[function(require,module){var objectExtend=require("extend-object"),extend=function(protoProps){var child,parent=this,args=[].slice.call(arguments);child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},objectExtend(child,parent);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&(args.unshift(child.prototype),objectExtend.apply(null,args)),child.__super__=parent.prototype,child};module.exports=extend},{"extend-object":58}],56:[function(require,module){module.exports=require(19)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/backbone-events-standalone.js":19}],57:[function(require,module){module.exports=require(20)},{"./backbone-events-standalone":56,"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/index.js":20}],58:[function(require,module){module.exports=require(52)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/extend-object/extend-object.js":52}],59:[function(require,module){var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(val){return!!val&&"[object Array]"==str.call(val)}},{}],60:[function(require,module){var Events=require("backbone-events-standalone"),_=require("underscore"),History=function(){this.handlers=[],this.checkUrl=_.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,pathStripper=/#.*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,atRoot:function(){var path=this.location.pathname.replace(/[^\/]$/,"$&/");return path===this.root&&!this.location.search},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getPath:function(){var path=decodeURI(this.location.pathname+this.location.search),root=this.root.slice(0,-1);return path.indexOf(root)||(path=path.slice(root.length)),path.slice(1)},getFragment:function(fragment){return null==fragment&&(fragment=this._hasPushState||!this._wantsHashChange?this.getPath():this.getHash()),fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var addEventListener=window.addEventListener;if(this.root=("/"+this.root+"/").replace(rootStripper,"/"),this._hasPushState?addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange?addEventListener("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}return this.options.silent?void 0:this.loadUrl()},stop:function(){var removeEventListener=window.removeEventListener;this._hasPushState?removeEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&removeEventListener("hashchange",this.checkUrl,!1),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(){var current=this.getFragment();return current===this.fragment?!1:void this.loadUrl()},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),this.handlers.some(function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0})},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:!!options});var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=decodeURI(fragment.replace(pathStripper,"")),this.fragment!==fragment){if(this.fragment=fragment,""===fragment&&"/"!==url&&(url=url.slice(0,-1)),this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace)}return options.trigger?this.loadUrl(fragment):void 0}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),module.exports=new History},{"backbone-events-standalone":65,underscore:99}],61:[function(require,module){var classExtend=require("ampersand-class-extend"),Events=require("backbone-events-standalone"),ampHistory=require("./ampersand-history"),_=require("underscore"),Router=module.exports=function(options){options||(options={}),this.history=options.history||ampHistory,options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return this.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args,name)!==!1&&(router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),router.history.trigger("route",router,name,args))}),this},execute:function(callback,args){callback&&callback.apply(this,args)},navigate:function(fragment,options){return this.history.navigate(fragment,options),this},redirectTo:function(newUrl){this.navigate(newUrl,{replace:!0,trigger:!0})},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=Object.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)"),new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return params.map(function(param,i){return i===params.length-1?param||null:param?decodeURIComponent(param):null})}}),Router.extend=classExtend},{"./ampersand-history":60,"ampersand-class-extend":62,"backbone-events-standalone":65,underscore:99}],62:[function(require,module){module.exports=require(55)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-rest-collection/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js":55,"extend-object":63}],63:[function(require,module){module.exports=require(52)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/extend-object/extend-object.js":52}],64:[function(require,module){module.exports=require(19)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/backbone-events-standalone.js":19}],65:[function(require,module){module.exports=require(20)},{"./backbone-events-standalone":64,"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/index.js":20}],66:[function(require,module){function ViewSwitcher(el,options){options||(options={}),this.el=el,this.config={hide:null,show:null,empty:null,waitForRemove:!1};for(var item in options)this.config.hasOwnProperty(item)&&(this.config[item]=options[item]);options.view?this.set(options.view):this._onViewRemove()}ViewSwitcher.prototype.set=function(view){var self=this,prev=this.previous=this.current,current=this._setCurrent(view);this.config.waitForRemove?this._hide(prev,function(){prev===self.previous&&current===self.current&&self._show(current)}):(this._hide(prev),this._show(current))},ViewSwitcher.prototype._setCurrent=function(view){this.current=view,view&&this._registerRemoveListener(view);var emptyCb=this.config.empty;return emptyCb&&!this.current&&emptyCb(),view},ViewSwitcher.prototype.clear=function(cb){this._hide(this.current,cb)},ViewSwitcher.prototype.remove=function(){this.current&&this.current.remove()},ViewSwitcher.prototype._show=function(view,cb){var customShow=this.config.show;customShow?3===customShow.length?(this._render(view),customShow(view,cb)):(this._render(view),customShow(view),cb&&cb()):(this._render(view),cb&&cb())},ViewSwitcher.prototype._registerRemoveListener=function(view){view&&view.once("remove",this._onViewRemove,this)},ViewSwitcher.prototype._onViewRemove=function(view){var emptyCb=this.config.empty;this.current===view&&(this.current=null),emptyCb&&!this.current&&emptyCb()},ViewSwitcher.prototype._render=function(view){view.rendered||view.render({containerEl:this.el}),this.el.appendChild(view.el)},ViewSwitcher.prototype._hide=function(view,cb){if(!view)return cb&&cb();var customHide=this.config.hide;customHide?3===customHide.length?customHide(view,this.current,function(){view.remove()}):(customHide(view,this.current),view.remove(),cb&&cb()):(view.remove(),cb&&cb())},module.exports=ViewSwitcher},{}],67:[function(require,module){function View(attrs){this.cid=_.uniqueId("view"),attrs||(attrs={});var parent=attrs.parent;delete attrs.parent,BaseState.call(this,attrs,{init:!1,parent:parent}),this.on("change:el",this._handleElementChange,this),this._parsedBindings=bindings(this.bindings),this._initializeBindings(),attrs.el&&!this.autoRender&&this._handleElementChange(),this._initializeSubviews(),this.initialize.apply(this,arguments),this.set(_.pick(attrs,viewOptions)),this.autoRender&&this.template&&this.render()}var State=require("ampersand-state"),CollectionView=require("ampersand-collection-view"),domify=require("domify"),_=require("underscore"),events=require("events-mixin"),matches=require("matches-selector"),bindings=require("ampersand-dom-bindings"),getPath=require("get-object-path"),BaseState=State.extend({dataTypes:{element:{set:function(newVal){return{val:newVal,type:newVal instanceof Element?"element":typeof newVal}},compare:function(el1,el2){return el1===el2}},collection:{set:function(newVal){return{val:newVal,type:newVal&&newVal.isCollection?"collection":typeof newVal}},compare:function(currentVal,newVal){return currentVal===newVal}}},props:{model:"state",el:"element",collection:"collection"},derived:{rendered:{deps:["el"],fn:function(){return!!this.el}},hasData:{deps:["model"],fn:function(){return!!this.model}}}}),viewOptions=["model","collection","el"];View.prototype=Object.create(BaseState.prototype),_.extend(View.prototype,{get:function(selector){return selector?"string"==typeof selector?matches(this.el,selector)?this.el:this.el.querySelector(selector)||void 0:selector:this.el},getAll:function(selector){var res=[];return this.el?""===selector?[this.el]:(matches(this.el,selector)&&res.push(this.el),res.concat(Array.prototype.slice.call(this.el.querySelectorAll(selector)))):res},getByRole:function(role){return this.get('[role="'+role+'"]')||this.el.getAttribute("role")===role&&this.el||void 0},initialize:function(){},render:function(){return this.renderWithTemplate(this),this},remove:function(){var parsedBindings=this._parsedBindings;return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),_.chain(this._subviews).flatten().invoke("remove"),this.stopListening(),_.each(parsedBindings,function(properties,modelName){_.each(properties,function(value,key){delete parsedBindings[modelName][key]}),delete parsedBindings[modelName]}),this.trigger("remove",this),this},_handleElementChange:function(){return this.eventManager&&this.eventManager.unbind(),this.eventManager=events(this.el,this),this.delegateEvents(),this._applyBindingsForKey(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events)this.eventManager.bind(key,events[key]);return this},undelegateEvents:function(){return this.eventManager.unbind(),this},registerSubview:function(view){return this._subviews||(this._subviews=[]),this._subviews.push(view),view.el&&(view.parent=this),view},renderSubview:function(view,container){return"string"==typeof container&&(container=this.get(container)),this.registerSubview(view),view.render(),container.appendChild(view.el),view},_applyBindingsForKey:function(name){if(this.el){var item,fns=this._parsedBindings.getGrouped(name);for(item in fns)fns[item].forEach(function(fn){fn(this.el,getPath(this,item),_.last(item.split(".")))},this)}},_initializeBindings:function(){this.bindings&&this.on("all",function(eventName){"change:"===eventName.slice(0,7)&&this._applyBindingsForKey(eventName.split(":")[1])},this)},_initializeSubviews:function(){if(this.subviews)for(var item in this.subviews)this._parseSubview(this.subviews[item],item)},_parseSubview:function(subview,name){function action(){var el,subview;this.el&&(el=this.get(opts.selector))&&(!opts.waitFor||getPath(this,opts.waitFor))&&(subview=this[name]=opts.prepareView.call(this,el),subview.render(),this.registerSubview(subview),this.off("change",action))}var self=this,opts={selector:subview.container||'[role="'+subview.role+'"]',waitFor:subview.waitFor||"",prepareView:subview.prepareView||function(el){return new subview.constructor({el:el,parent:self})}};this.on("change",action,this)},renderWithTemplate:function(context,templateArg){var template=templateArg||this.template;if(!template)throw new Error("Template string or function needed.");var newDom=_.isString(template)?template:template(context||this);_.isString(newDom)&&(newDom=domify(newDom));var parent=this.el&&this.el.parentNode;if(parent&&parent.replaceChild(newDom,this.el),"#document-fragment"===newDom.nodeName)throw new Error("Views can only have one root element.");return this.el=newDom,this},cacheElements:function(hash){for(var item in hash)this[item]=this.get(hash[item])},listenToAndRun:function(object,events,handler){var bound=_.bind(handler,this);this.listenTo(object,events,bound),bound()},animateRemove:function(){this.remove()},renderCollection:function(collection,ViewClass,container,opts){var containerEl="string"==typeof container?this.get(container):container,config=_.extend({collection:collection,el:containerEl,view:ViewClass},opts),collectionView=new CollectionView(config);collectionView.render(),this.registerSubview(collectionView)}}),View.extend=BaseState.extend,module.exports=View},{"ampersand-collection-view":68,"ampersand-dom-bindings":73,"ampersand-state":76,domify:96,"events-mixin":81,"get-object-path":86,"matches-selector":87,underscore:88}],68:[function(require,module){function CollectionView(spec){if(!spec)throw new ReferenceError("Collection view missing required parameters: collection, el");if(!spec.collection)throw new ReferenceError("Collection view requires a collection");if(!spec.el)throw new ReferenceError("Collection view requires an el");_.extend(this,_.pick(spec,options)),this.views=[],this.listenTo(this.collection,"add",this._addViewForModel),this.listenTo(this.collection,"remove",this._removeViewForModel),this.listenTo(this.collection,"sort",this._rerenderAll),this.listenTo(this.collection,"refresh reset",this._reset)}var _=require("underscore"),BBEvents=require("backbone-events-standalone"),ampExtend=require("ampersand-class-extend"),options=["collection","el","viewOptions","view","filter","reverse"];
_.extend(CollectionView.prototype,BBEvents,{render:function(){return this._renderAll(),this},remove:function(){_.invoke(this.views,"remove"),this.stopListening()},_getViewByModel:function(model){return _.find(this.views,function(view){return model===view.model})},_createViewForModel:function(model){var view=new this.view(_({model:model,collection:this.collection}).extend(this.viewOptions));return this.views.push(view),view.parent=this,view.renderedByParentView=!0,view.render(),view},_getOrCreateByModel:function(model){return this._getViewByModel(model)||this._createViewForModel(model)},_addViewForModel:function(model,collection,options){var view=this._getViewByModel(model),matches=this.filter?this.filter(model):!0;matches&&(view||(view=new this.view(_({model:model,collection:this.collection}).extend(this.viewOptions)),this.views.push(view),view.parent=this,view.renderedByParentView=!0,view.render({containerEl:this.el})),options&&options.rerender?this._insertView(view):this._insertViewAtIndex(view))},_insertViewAtIndex:function(view){if(!view.insertSelf){var modelToInsertBefore,viewToInsertBefore,pos=this.collection.indexOf(view.model);modelToInsertBefore=this.collection.at(this.reverse?pos-1:pos+1),viewToInsertBefore=this._getViewByModel(modelToInsertBefore),viewToInsertBefore?this.el.insertBefore(view.el,viewToInsertBefore&&viewToInsertBefore.el):this.el.appendChild(view.el)}},_insertView:function(view){view.insertSelf||(this.reverse&&this.el.firstChild?this.el.insertBefore(view.el,this.el.firstChild):this.el.appendChild(view.el))},_removeViewForModel:function(model){var view=this._getViewByModel(model);if(view){var index=this.views.indexOf(view);-1!==index&&(view=this.views.splice(index,1)[0],this._removeView(view))}},_removeView:function(view){view.animateRemove?view.animateRemove():view.remove()},_renderAll:function(){this.collection.each(this._addViewForModel,this)},_rerenderAll:function(collection,options){options=options||{},this.collection.each(function(model){this._addViewForModel(model,this,_.extend(options,{rerender:!0}))},this)},_reset:function(){var newViews=this.collection.map(this._getOrCreateByModel,this),toRemove=_.difference(this.views,newViews);toRemove.forEach(this._removeView,this),this.views=newViews,this._rerenderAll()}}),CollectionView.extend=ampExtend,module.exports=CollectionView},{"ampersand-class-extend":69,"backbone-events-standalone":72,underscore:88}],69:[function(require,module){module.exports=require(55)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-rest-collection/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js":55,"extend-object":70}],70:[function(require,module){module.exports=require(52)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/extend-object/extend-object.js":52}],71:[function(require,module){module.exports=require(19)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/backbone-events-standalone.js":19}],72:[function(require,module){module.exports=require(20)},{"./backbone-events-standalone":71,"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/index.js":20}],73:[function(require,module){function getMatches(el,selector){if(""===selector)return[el];var matches=[];return matchesSelector(el,selector)&&matches.push(el),matches.concat(slice.call(el.querySelectorAll(selector)))}function makeArray(val){return Array.isArray(val)?val:[val]}function getBindingFunc(binding){var type=binding.type||"text",selector=function(){return"string"==typeof binding.selector?binding.selector:binding.role?'[role="'+binding.role+'"]':""}(),previousValue="";if("text"===type)return function(el,value){getMatches(el,selector).forEach(function(match){dom.text(match,value)})};if("class"===type)return function(el,value){getMatches(el,selector).forEach(function(match){dom.switchClass(match,previousValue,value)}),previousValue=value};if("attribute"===type){if(!binding.name)throw Error('attribute bindings must have a "name"');return function(el,value){var names=makeArray(binding.name);getMatches(el,selector).forEach(function(match){names.forEach(function(name){dom.setAttribute(match,name,value)})}),previousValue=value}}if("value"===type)return function(el,value){getMatches(el,selector).forEach(function(match){value||0===value||(value=""),match.value=value}),previousValue=value};if("booleanClass"===type)return binding.no?function(el,value,keyName){var yes=makeArray(binding.name||binding.yes||keyName),no=makeArray(binding.no),prevClass=value?no:yes,newClass=value?yes:no;getMatches(el,selector).forEach(function(match){prevClass.forEach(function(pc){dom.removeClass(match,pc)}),newClass.forEach(function(nc){dom.addClass(match,nc)})})}:function(el,value,keyName){var name=makeArray(binding.name||keyName);getMatches(el,selector).forEach(function(match){name.forEach(function(className){dom[value?"addClass":"removeClass"](match,className)})})};if("booleanAttribute"===type)return function(el,value,keyName){var name=makeArray(binding.name||keyName);getMatches(el,selector).forEach(function(match){name.forEach(function(attr){dom[value?"addAttribute":"removeAttribute"](match,attr)})})};if("toggle"===type)return binding.yes&&binding.no?function(el,value){getMatches(el,binding.yes).forEach(function(match){dom[value?"show":"hide"](match)}),getMatches(el,binding.no).forEach(function(match){dom[value?"hide":"show"](match)})}:function(el,value){getMatches(el,selector).forEach(function(match){dom[value?"show":"hide"](match)})};if("switch"===type){if(!binding.cases)throw Error('switch bindings must have "cases"');return function(el,value){for(var item in binding.cases)getMatches(el,binding.cases[item]).forEach(function(match){dom[value===item?"show":"hide"](match)})}}if("innerHTML"===type)return function(el,value){getMatches(el,selector).forEach(function(match){dom.html(match,value)})};throw new Error("no such binding type: "+type)}var Store=require("key-tree-store"),dom=(require("is-array"),require("ampersand-dom")),matchesSelector=require("matches-selector");module.exports=function(bindings){var key,current,store=new Store;for(key in bindings)current=bindings[key],"string"==typeof current?store.add(key,getBindingFunc({type:"text",selector:current})):current.forEach?current.forEach(function(binding){store.add(key,getBindingFunc(binding))}):store.add(key,getBindingFunc(current));return store};var slice=Array.prototype.slice},{"ampersand-dom":15,"is-array":74,"key-tree-store":75,"matches-selector":87}],74:[function(require,module){module.exports=require(59)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-rest-collection/node_modules/ampersand-collection/node_modules/is-array/index.js":59}],75:[function(require,module){function KeyTreeStore(){this.storage={}}var slice=Array.prototype.slice;KeyTreeStore.prototype.add=function(keypath,obj){var arr=this.storage[keypath]||(this.storage[keypath]=[]);arr.push(obj)},KeyTreeStore.prototype.remove=function(obj){var path,arr;for(path in this.storage)arr=this.storage[path],arr.some(function(item,index){return item===obj?(arr.splice(index,1),!0):void 0})},KeyTreeStore.prototype.get=function(keypath){var key,res=[];for(key in this.storage)keypath&&keypath!==key&&0!==key.indexOf(keypath+".")||(res=res.concat(this.storage[key]));return res},KeyTreeStore.prototype.getGrouped=function(keypath){var key,res={};for(key in this.storage)keypath&&keypath!==key&&0!==key.indexOf(keypath+".")||(res[key]=slice.call(this.storage[key]));return res},KeyTreeStore.prototype.getAll=function(keypath){var key,res={};for(key in this.storage)(keypath===key||0===key.indexOf(keypath+"."))&&(res[key]=slice.call(this.storage[key]));return res},KeyTreeStore.prototype.run=function(keypath,context){var args=slice.call(arguments,2);this.get(keypath).forEach(function(fn){fn.apply(context||this,args)})},module.exports=KeyTreeStore},{}],76:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/ampersand-state.js":17,"array-next":77,"backbone-events-standalone":79,"key-tree-store":80,underscore:88}],77:[function(require,module){module.exports=require(18)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/array-next/array-next.js":18}],78:[function(require,module){module.exports=require(19)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/backbone-events-standalone.js":19}],79:[function(require,module){module.exports=require(20)},{"./backbone-events-standalone":78,"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/backbone-events-standalone/index.js":20}],80:[function(require,module){module.exports=require(21)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-state/node_modules/key-tree-store/key-tree-store.js":21}],81:[function(require,module){function Events(el,obj){if(!(this instanceof Events))return new Events(el,obj);if(!el)throw new Error("element required");if(!obj)throw new Error("object required");this.el=el,this.obj=obj,this._events={}}function parse(event){var parts=event.split(/ +/);return{name:parts.shift(),selector:parts.join(" ")}}var events=require("component-event"),delegate=require("delegate-events"),forceCaptureEvents=["focus","blur"];module.exports=Events,Events.prototype.sub=function(event,method,cb){this._events[event]=this._events[event]||{},this._events[event][method]=cb},Events.prototype.bind=function(event,method){function cb(){var a=[].slice.call(arguments).concat(args);obj[method].apply(obj,a)}var e=parse(event),el=this.el,obj=this.obj,name=e.name,method=method||"on"+name,args=[].slice.call(arguments,2);return e.selector?cb=delegate.bind(el,e.selector,name,cb):events.bind(el,name,cb),this.sub(name,method,cb),cb},Events.prototype.unbind=function(event,method){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(event);var bindings=this._events[event],capture=-1!==forceCaptureEvents.indexOf(event);if(bindings){var cb=bindings[method];cb&&events.unbind(this.el,event,cb,capture)}},Events.prototype.unbindAll=function(){for(var event in this._events)this.unbindAllOf(event)},Events.prototype.unbindAllOf=function(event){var bindings=this._events[event];if(bindings)for(var method in bindings)this.unbind(event,method)}},{"component-event":82,"delegate-events":83}],82:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix="addEventListener"!==bind?"on":"";exports.bind=function(el,type,fn,capture){return el[bind](prefix+type,fn,capture||!1),fn},exports.unbind=function(el,type,fn,capture){return el[unbind](prefix+type,fn,capture||!1),fn}},{}],83:[function(require,module,exports){var closest=require("closest"),event=require("event"),forceCaptureEvents=["focus","blur"];exports.bind=function(el,selector,type,fn,capture){return-1!==forceCaptureEvents.indexOf(type)&&(capture=!0),event.bind(el,type,function(e){var target=e.target||e.srcElement;e.delegateTarget=closest(target,selector,!0,el),e.delegateTarget&&fn.call(el,e)},capture)},exports.unbind=function(el,type,fn,capture){-1!==forceCaptureEvents.indexOf(type)&&(capture=!0),event.unbind(el,type,fn,capture)}},{closest:84,event:82}],84:[function(require,module){var matches=require("matches-selector");module.exports=function(element,selector,checkYoSelf){for(var parent=checkYoSelf?element:element.parentNode;parent&&parent!==document;){if(matches(parent,selector))return parent;parent=parent.parentNode}}},{"matches-selector":85}],85:[function(require,module){function match(el,selector){if(vendor)return vendor.call(el,selector);for(var nodes=el.parentNode.querySelectorAll(selector),i=0;i<nodes.length;++i)if(nodes[i]==el)return!0;return!1}var proto=Element.prototype,vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match},{}],86:[function(require,module){function get(context,path){if(-1==path.indexOf(".")&&-1==path.indexOf("["))return context[path];for(var result,crumbs=path.split(/\.|\[|\]/g),i=-1,len=crumbs.length;++i<len;)if(0==i&&(result=context),crumbs[i]){if(void 0==result)break;result=result[crumbs[i]]}return result}module.exports=get},{}],87:[function(require,module){"use strict";function match(el,selector){if(vendor)return vendor.call(el,selector);for(var nodes=el.parentNode.querySelectorAll(selector),i=0;i<nodes.length;i++)if(nodes[i]==el)return!0;return!1}var proto=Element.prototype,vendor=proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match},{}],88:[function(require,module){module.exports=require(28)},{"/Users/neerajkumar/projects/betfair_nav_demo/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js":28}],89:[function(require,module,exports){!function(){var inNode="undefined"==typeof window,ls=!inNode&&window.localStorage,out={};if(inNode)return void(module.exports=console);var andlogKey=ls.andlogKey||"debug";if(ls&&ls[andlogKey]&&window.console)out=window.console;else for(var methods="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),l=methods.length,fn=function(){};l--;)out[methods[l]]=fn;"undefined"!=typeof exports?module.exports=out:window.console=out}()},{}],90:[function(){},{}],91:[function(require,module,exports){function Buffer(subject,encoding,noZero){if(!(this instanceof Buffer))return new Buffer(subject,encoding,noZero);var length,type=typeof subject;if("number"===type)length=subject>0?subject>>>0:0;else if("string"===type)"base64"===encoding&&(subject=base64clean(subject)),length=Buffer.byteLength(subject,encoding);else{if("object"!==type||null===subject)throw new Error("First argument needs to be a number, array or string.");"Buffer"===subject.type&&isArray(subject.data)&&(subject=subject.data),length=+subject.length>0?Math.floor(+subject.length):0}var buf;TYPED_ARRAY_SUPPORT?buf=Buffer._augment(new Uint8Array(length)):(buf=this,buf.length=length,buf._isBuffer=!0);var i;if(TYPED_ARRAY_SUPPORT&&"number"==typeof subject.byteLength)buf._set(subject);else if(isArrayish(subject))if(Buffer.isBuffer(subject))for(i=0;length>i;i++)buf[i]=subject.readUInt8(i);else for(i=0;length>i;i++)buf[i]=(subject[i]%256+256)%256;else if("string"===type)buf.write(subject,0,encoding);else if("number"===type&&!TYPED_ARRAY_SUPPORT&&!noZero)for(i=0;length>i;i++)buf[i]=0;return buf}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;assert(strLen%2===0,"Invalid hex string"),length>strLen/2&&(length=strLen/2);for(var i=0;length>i;i++){var byte=parseInt(string.substr(2*i,2),16);assert(!isNaN(byte),"Invalid hex string"),buf[offset+i]=byte}return i}function utf8Write(buf,string,offset,length){var charsWritten=blitBuffer(utf8ToBytes(string),buf,offset,length);return charsWritten}function asciiWrite(buf,string,offset,length){var charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){var charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function utf16leWrite(buf,string,offset,length){var charsWritten=blitBuffer(utf16leToBytes(string),buf,offset,length);return charsWritten}function base64Slice(buf,start,end){return base64.fromByteArray(0===start&&end===buf.length?buf:buf.slice(start,end))}function utf8Slice(buf,start,end){var res="",tmp="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)buf[i]<=127?(res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]),tmp=""):tmp+="%"+buf[i].toString(16);return res+decodeUtf8Char(tmp)}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(buf[i]);return ret}function binarySlice(buf,start,end){return asciiSlice(buf,start,end)}function hexSlice(buf,start,end){var len=buf.length;(!start||0>start)&&(start=0),(!end||0>end||end>len)&&(end=len);for(var out="",i=start;end>i;i++)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function readUInt16(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(val=buf[offset],len>offset+1&&(val|=buf[offset+1]<<8)):(val=buf[offset]<<8,len>offset+1&&(val|=buf[offset+1])),val}}function readUInt32(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(len>offset+2&&(val=buf[offset+2]<<16),len>offset+1&&(val|=buf[offset+1]<<8),val|=buf[offset],len>offset+3&&(val+=buf[offset+3]<<24>>>0)):(len>offset+1&&(val=buf[offset+1]<<16),len>offset+2&&(val|=buf[offset+2]<<8),len>offset+3&&(val|=buf[offset+3]),val+=buf[offset]<<24>>>0),val}}function readInt16(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val=readUInt16(buf,offset,littleEndian,!0),neg=32768&val;return neg?-1*(65535-val+1):val}}function readInt32(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val=readUInt32(buf,offset,littleEndian,!0),neg=2147483648&val;return neg?-1*(4294967295-val+1):val}}function readFloat(buf,offset,littleEndian,noAssert){return noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(offset+3<buf.length,"Trying to read beyond buffer length")),ieee754.read(buf,offset,littleEndian,23,4)}function readDouble(buf,offset,littleEndian,noAssert){return noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(offset+7<buf.length,"Trying to read beyond buffer length")),ieee754.read(buf,offset,littleEndian,52,8)}function writeUInt16(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"trying to write beyond buffer length"),verifuint(value,65535));var len=buf.length;if(!(offset>=len)){for(var i=0,j=Math.min(len-offset,2);j>i;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i);return offset+2}}function writeUInt32(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"trying to write beyond buffer length"),verifuint(value,4294967295));var len=buf.length;if(!(offset>=len)){for(var i=0,j=Math.min(len-offset,4);j>i;i++)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255;return offset+4}}function writeInt16(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to write beyond buffer length"),verifsint(value,32767,-32768));var len=buf.length;if(!(offset>=len))return value>=0?writeUInt16(buf,value,offset,littleEndian,noAssert):writeUInt16(buf,65535+value+1,offset,littleEndian,noAssert),offset+2}function writeInt32(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to write beyond buffer length"),verifsint(value,2147483647,-2147483648));var len=buf.length;if(!(offset>=len))return value>=0?writeUInt32(buf,value,offset,littleEndian,noAssert):writeUInt32(buf,4294967295+value+1,offset,littleEndian,noAssert),offset+4}function writeFloat(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to write beyond buffer length"),verifIEEE754(value,3.4028234663852886e38,-3.4028234663852886e38));var len=buf.length;if(!(offset>=len))return ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+7<buf.length,"Trying to write beyond buffer length"),verifIEEE754(value,1.7976931348623157e308,-1.7976931348623157e308));var len=buf.length;if(!(offset>=len))return ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){for(str=stringtrim(str).replace(INVALID_BASE64_RE,"");str.length%4!==0;)str+="=";return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function isArray(subject){return(Array.isArray||function(subject){return"[object Array]"===Object.prototype.toString.call(subject)})(subject)}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&"object"==typeof subject&&"number"==typeof subject.length}function toHex(n){return 16>n?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(str){for(var byteArray=[],i=0;i<str.length;i++){var b=str.charCodeAt(i);if(127>=b)byteArray.push(b);else{var start=i;b>=55296&&57343>=b&&i++;for(var h=encodeURIComponent(str.slice(start,i+1)).substr(1).split("%"),j=0;j<h.length;j++)byteArray.push(parseInt(h[j],16))}}return byteArray}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str){for(var c,hi,lo,byteArray=[],i=0;i<str.length;i++)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(str)}function blitBuffer(src,dst,offset,length){for(var i=0;length>i&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}function verifuint(value,max){assert("number"==typeof value,"cannot write a non-number as a number"),assert(value>=0,"specified a negative value for writing an unsigned value"),assert(max>=value,"value is larger than maximum value for type"),assert(Math.floor(value)===value,"value has a fractional component")}function verifsint(value,max,min){assert("number"==typeof value,"cannot write a non-number as a number"),assert(max>=value,"value larger than maximum allowed value"),assert(value>=min,"value smaller than minimum allowed value"),assert(Math.floor(value)===value,"value has a fractional component")}function verifIEEE754(value,max,min){assert("number"==typeof value,"cannot write a non-number as a number"),assert(max>=value,"value larger than maximum allowed value"),assert(value>=min,"value smaller than minimum allowed value")}function assert(test,message){if(!test)throw new Error(message||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var TYPED_ARRAY_SUPPORT=function(){try{var buf=new ArrayBuffer(0),arr=new Uint8Array(buf);return arr.foo=function(){return 42},42===arr.foo()&&"function"==typeof arr.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(e){return!1}}();Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.byteLength=function(str,encoding){var ret;switch(str=str.toString(),encoding||"utf8"){case"hex":ret=str.length/2;break;case"utf8":case"utf-8":ret=utf8ToBytes(str).length;break;case"ascii":case"binary":case"raw":ret=str.length;break;case"base64":ret=base64ToBytes(str).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=2*str.length;break;default:throw new Error("Unknown encoding")}return ret},Buffer.concat=function(list,totalLength){if(assert(isArray(list),"Usage: Buffer.concat(list[, length])"),0===list.length)return new Buffer(0);if(1===list.length)return list[0];var i;if(void 0===totalLength)for(totalLength=0,i=0;i<list.length;i++)totalLength+=list[i].length;var buf=new Buffer(totalLength),pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos),pos+=item.length}return buf},Buffer.compare=function(a,b){assert(Buffer.isBuffer(a)&&Buffer.isBuffer(b),"Arguments must be Buffers");for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);len>i&&a[i]===b[i];i++);return i!==len&&(x=a[i],y=b[i]),y>x?-1:x>y?1:0},Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset))isFinite(length)||(encoding=length,length=void 0);else{var swap=encoding;encoding=offset,offset=length,length=swap}offset=Number(offset)||0;var remaining=this.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining,encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=hexWrite(this,string,offset,length);break;case"utf8":case"utf-8":ret=utf8Write(this,string,offset,length);break;case"ascii":ret=asciiWrite(this,string,offset,length);break;case"binary":ret=binaryWrite(this,string,offset,length);break;case"base64":ret=base64Write(this,string,offset,length);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=utf16leWrite(this,string,offset,length);break;default:throw new Error("Unknown encoding")}return ret},Buffer.prototype.toString=function(encoding,start,end){var self=this;if(encoding=String(encoding||"utf8").toLowerCase(),start=Number(start)||0,end=void 0===end?self.length:Number(end),end===start)return"";var ret;switch(encoding){case"hex":ret=hexSlice(self,start,end);break;case"utf8":case"utf-8":ret=utf8Slice(self,start,end);break;case"ascii":ret=asciiSlice(self,start,end);break;case"binary":ret=binarySlice(self,start,end);break;case"base64":ret=base64Slice(self,start,end);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=utf16leSlice(self,start,end);break;default:throw new Error("Unknown encoding")}return ret},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.equals=function(b){return assert(Buffer.isBuffer(b),"Argument must be a Buffer"),0===Buffer.compare(this,b)},Buffer.prototype.compare=function(b){return assert(Buffer.isBuffer(b),"Argument must be a Buffer"),Buffer.compare(this,b)},Buffer.prototype.copy=function(target,target_start,start,end){var source=this;if(start||(start=0),end||0===end||(end=this.length),target_start||(target_start=0),end!==start&&0!==target.length&&0!==source.length){assert(end>=start,"sourceEnd < sourceStart"),assert(target_start>=0&&target_start<target.length,"targetStart out of bounds"),assert(start>=0&&start<source.length,"sourceStart out of bounds"),assert(end>=0&&end<=source.length,"sourceEnd out of bounds"),end>this.length&&(end=this.length),target.length-target_start<end-start&&(end=target.length-target_start+start);var len=end-start;if(100>len||!TYPED_ARRAY_SUPPORT)for(var i=0;len>i;i++)target[i+target_start]=this[i+start];else target._set(this.subarray(start,start+len),target_start)}},Buffer.prototype.slice=function(start,end){var len=this.length;if(start=~~start,end=void 0===end?len:~~end,0>start?(start+=len,0>start&&(start=0)):start>len&&(start=len),0>end?(end+=len,0>end&&(end=0)):end>len&&(end=len),start>end&&(end=start),TYPED_ARRAY_SUPPORT)return Buffer._augment(this.subarray(start,end));for(var sliceLen=end-start,newBuf=new Buffer(sliceLen,void 0,!0),i=0;sliceLen>i;i++)newBuf[i]=this[i+start];return newBuf},Buffer.prototype.get=function(offset){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(offset)},Buffer.prototype.set=function(v,offset){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(v,offset)},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||(assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to read beyond buffer length")),offset>=this.length?void 0:this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return readUInt16(this,offset,!0,noAssert)},Buffer.prototype.readUInt16BE=function(offset,noAssert){return readUInt16(this,offset,!1,noAssert)},Buffer.prototype.readUInt32LE=function(offset,noAssert){return readUInt32(this,offset,!0,noAssert)},Buffer.prototype.readUInt32BE=function(offset,noAssert){return readUInt32(this,offset,!1,noAssert)},Buffer.prototype.readInt8=function(offset,noAssert){if(noAssert||(assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to read beyond buffer length")),!(offset>=this.length)){var neg=128&this[offset];return neg?-1*(255-this[offset]+1):this[offset]}},Buffer.prototype.readInt16LE=function(offset,noAssert){return readInt16(this,offset,!0,noAssert)},Buffer.prototype.readInt16BE=function(offset,noAssert){return readInt16(this,offset,!1,noAssert)},Buffer.prototype.readInt32LE=function(offset,noAssert){return readInt32(this,offset,!0,noAssert)},Buffer.prototype.readInt32BE=function(offset,noAssert){return readInt32(this,offset,!1,noAssert)},Buffer.prototype.readFloatLE=function(offset,noAssert){return readFloat(this,offset,!0,noAssert)},Buffer.prototype.readFloatBE=function(offset,noAssert){return readFloat(this,offset,!1,noAssert)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return readDouble(this,offset,!0,noAssert)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return readDouble(this,offset,!1,noAssert)},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"trying to write beyond buffer length"),verifuint(value,255)),offset>=this.length?void 0:(this[offset]=value,offset+1)},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return writeUInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return writeUInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return writeUInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return writeUInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt8=function(value,offset,noAssert){return noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to write beyond buffer length"),verifsint(value,127,-128)),offset>=this.length?void 0:(value>=0?this.writeUInt8(value,offset,noAssert):this.writeUInt8(255+value+1,offset,noAssert),offset+1)
},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return writeInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return writeInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return writeInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return writeInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.fill=function(value,start,end){if(value||(value=0),start||(start=0),end||(end=this.length),assert(end>=start,"end < start"),end!==start&&0!==this.length){assert(start>=0&&start<this.length,"start out of bounds"),assert(end>=0&&end<=this.length,"end out of bounds");var i;if("number"==typeof value)for(i=start;end>i;i++)this[i]=value;else{var bytes=utf8ToBytes(value.toString()),len=bytes.length;for(i=start;end>i;i++)this[i]=bytes[i%len]}return this}},Buffer.prototype.inspect=function(){for(var out=[],len=this.length,i=0;len>i;i++)if(out[i]=toHex(this[i]),i===exports.INSPECT_MAX_BYTES){out[i+1]="...";break}return"<Buffer "+out.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var buf=new Uint8Array(this.length),i=0,len=buf.length;len>i;i+=1)buf[i]=this[i];return buf.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(arr){return arr._isBuffer=!0,arr._get=arr.get,arr._set=arr.set,arr.get=BP.get,arr.set=BP.set,arr.write=BP.write,arr.toString=BP.toString,arr.toLocaleString=BP.toString,arr.toJSON=BP.toJSON,arr.equals=BP.equals,arr.compare=BP.compare,arr.copy=BP.copy,arr.slice=BP.slice,arr.readUInt8=BP.readUInt8,arr.readUInt16LE=BP.readUInt16LE,arr.readUInt16BE=BP.readUInt16BE,arr.readUInt32LE=BP.readUInt32LE,arr.readUInt32BE=BP.readUInt32BE,arr.readInt8=BP.readInt8,arr.readInt16LE=BP.readInt16LE,arr.readInt16BE=BP.readInt16BE,arr.readInt32LE=BP.readInt32LE,arr.readInt32BE=BP.readInt32BE,arr.readFloatLE=BP.readFloatLE,arr.readFloatBE=BP.readFloatBE,arr.readDoubleLE=BP.readDoubleLE,arr.readDoubleBE=BP.readDoubleBE,arr.writeUInt8=BP.writeUInt8,arr.writeUInt16LE=BP.writeUInt16LE,arr.writeUInt16BE=BP.writeUInt16BE,arr.writeUInt32LE=BP.writeUInt32LE,arr.writeUInt32BE=BP.writeUInt32BE,arr.writeInt8=BP.writeInt8,arr.writeInt16LE=BP.writeInt16LE,arr.writeInt16BE=BP.writeInt16BE,arr.writeInt32LE=BP.writeInt32LE,arr.writeInt32BE=BP.writeInt32BE,arr.writeFloatLE=BP.writeFloatLE,arr.writeFloatBE=BP.writeFloatBE,arr.writeDoubleLE=BP.writeDoubleLE,arr.writeDoubleBE=BP.writeDoubleBE,arr.fill=BP.fill,arr.inspect=BP.inspect,arr.toArrayBuffer=BP.toArrayBuffer,arr};var INVALID_BASE64_RE=/[^+\/0-9A-z]/g},{"base64-js":92,ieee754:93}],92:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(exports){"use strict";function decode(elt){var code=elt.charCodeAt(0);return code===PLUS?62:code===SLASH?63:NUMBER>code?-1:NUMBER+10>code?code-NUMBER+26+26:UPPER+26>code?code-UPPER:LOWER+26>code?code-LOWER+26:void 0}function b64ToByteArray(b64){function push(v){arr[L++]=v}var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0,arr=new Arr(3*b64.length/4-placeHolders),l=placeHolders>0?b64.length-4:b64.length;var L=0;for(i=0,j=0;l>i;i+=4,j+=3)tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3)),push((16711680&tmp)>>16),push((65280&tmp)>>8),push(255&tmp);return 2===placeHolders?(tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4,push(255&tmp)):1===placeHolders&&(tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2,push(tmp>>8&255),push(255&tmp)),arr}function uint8ToBase64(uint8){function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(63&num)}var i,temp,length,extraBytes=uint8.length%3,output="";for(i=0,length=uint8.length-extraBytes;length>i;i+=3)temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output+=tripletToBase64(temp);switch(extraBytes){case 1:temp=uint8[uint8.length-1],output+=encode(temp>>2),output+=encode(temp<<4&63),output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1],output+=encode(temp>>10),output+=encode(temp>>4&63),output+=encode(temp<<2&63),output+="="}return output}var Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,PLUS="+".charCodeAt(0),SLASH="/".charCodeAt(0),NUMBER="0".charCodeAt(0),LOWER="a".charCodeAt(0),UPPER="A".charCodeAt(0);exports.toByteArray=b64ToByteArray,exports.fromByteArray=uint8ToBase64}("undefined"==typeof exports?this.base64js={}:exports)},{}],93:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?0/0:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=0>value||0===value&&0>1/value?1:0;for(value=Math.abs(value),isNaN(value)||1/0===value?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],94:[function(require,module){var cookies=require("cookie-getter"),config=cookies("config")||{};Object.freeze&&Object.freeze(config),document.cookie="config=;expires=Thu, 01 Jan 1970 00:00:00 GMT",module.exports=config},{"cookie-getter":95}],95:[function(require,module){module.exports=function(name){var res,cookie=document.cookie,setPos=cookie.indexOf(name+"="),stopPos=cookie.indexOf(";",setPos);return~setPos?(res=decodeURIComponent(cookie.substring(setPos,~stopPos?stopPos:void 0).split("=")[1]),"{"===res.charAt(0)?JSON.parse(res):res):null}},{}],96:[function(require,module){function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");doc||(doc=document);var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if("body"==tag){var el=doc.createElement("html");return el.innerHTML=html,el.removeChild(el.lastChild)}var wrap=map[tag]||map._default,depth=wrap[0],prefix=wrap[1],suffix=wrap[2],el=doc.createElement("div");for(el.innerHTML=prefix+html+suffix;depth--;)el=el.lastChild;if(el.firstChild==el.lastChild)return el.removeChild(el.firstChild);for(var fragment=doc.createDocumentFragment();el.firstChild;)fragment.appendChild(el.removeChild(el.firstChild));return fragment}module.exports=parse;var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"],map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"],map.text=map.circle=map.ellipse=map.line=map.path=map.polygon=map.polyline=map.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],97:[function(require,module){!function(name,definition){"undefined"!=typeof module?module.exports=definition():"function"==typeof define&&"object"==typeof define.amd?define(definition):this[name]=definition()}("domready",function(){var listener,fns=[],doc=document,domContentLoaded="DOMContentLoaded",loaded=/^loaded|^c/.test(doc.readyState);return loaded||doc.addEventListener(domContentLoaded,listener=function(){for(doc.removeEventListener(domContentLoaded,listener),loaded=1;listener=fns.shift();)listener()}),function(fn){loaded?fn():fns.push(fn)}})},{}],98:[function(require,module){!function(){function setFavicon(href){var head=document.head=document.getElementsByTagName("head")[0],faviconId="favicon",link=document.createElement("link"),oldLink=document.getElementById(faviconId);return link.id=faviconId,link.rel="shortcut icon",link.href=href,oldLink&&head.removeChild(oldLink),head.appendChild(link),this}"undefined"!=typeof module?module.exports=setFavicon:"undefined"!=typeof $?$.setFavicon=setFavicon:window.setFavicon=setFavicon}()},{}],99:[function(require,module,exports){(function(){var root=this,previousUnderscore=root._,ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.7.0";var createCallback=function(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};_.iteratee=function(value,context,argCount){return null==value?_.identity:_.isFunction(value)?createCallback(value,context,argCount):_.isObject(value)?_.matches(value):_.property(value)},_.each=_.forEach=function(obj,iteratee,context){if(null==obj)return obj;iteratee=createCallback(iteratee,context);var i,length=obj.length;if(length===+length)for(i=0;length>i;i++)iteratee(obj[i],i,obj);else{var keys=_.keys(obj);for(i=0,length=keys.length;length>i;i++)iteratee(obj[keys[i]],keys[i],obj)}return obj},_.map=_.collect=function(obj,iteratee,context){if(null==obj)return[];iteratee=_.iteratee(iteratee,context);for(var currentKey,keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,results=Array(length),index=0;length>index;index++)currentKey=keys?keys[index]:index,results[index]=iteratee(obj[currentKey],currentKey,obj);return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iteratee,memo,context){null==obj&&(obj=[]),iteratee=createCallback(iteratee,context,4);var currentKey,keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index=0;if(arguments.length<3){if(!length)throw new TypeError(reduceError);memo=obj[keys?keys[index++]:index++]}for(;length>index;index++)currentKey=keys?keys[index]:index,memo=iteratee(memo,obj[currentKey],currentKey,obj);return memo},_.reduceRight=_.foldr=function(obj,iteratee,memo,context){null==obj&&(obj=[]),iteratee=createCallback(iteratee,context,4);var currentKey,keys=obj.length!==+obj.length&&_.keys(obj),index=(keys||obj).length;if(arguments.length<3){if(!index)throw new TypeError(reduceError);memo=obj[keys?keys[--index]:--index]}for(;index--;)currentKey=keys?keys[index]:index,memo=iteratee(memo,obj[currentKey],currentKey,obj);return memo},_.find=_.detect=function(obj,predicate,context){var result;return predicate=_.iteratee(predicate,context),_.some(obj,function(value,index,list){return predicate(value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,predicate,context){var results=[];return null==obj?results:(predicate=_.iteratee(predicate,context),_.each(obj,function(value,index,list){predicate(value,index,list)&&results.push(value)}),results)},_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(_.iteratee(predicate)),context)},_.every=_.all=function(obj,predicate,context){if(null==obj)return!0;predicate=_.iteratee(predicate,context);var index,currentKey,keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length;for(index=0;length>index;index++)if(currentKey=keys?keys[index]:index,!predicate(obj[currentKey],currentKey,obj))return!1;return!0},_.some=_.any=function(obj,predicate,context){if(null==obj)return!1;predicate=_.iteratee(predicate,context);var index,currentKey,keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length;for(index=0;length>index;index++)if(currentKey=keys?keys[index]:index,predicate(obj[currentKey],currentKey,obj))return!0;return!1},_.contains=_.include=function(obj,target){return null==obj?!1:(obj.length!==+obj.length&&(obj=_.values(obj)),_.indexOf(obj,target)>=0)},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))},_.max=function(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee&&null!=obj){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;length>i;i++)value=obj[i],value>result&&(result=value)}else iteratee=_.iteratee(iteratee,context),_.each(obj,function(value,index,list){computed=iteratee(value,index,list),(computed>lastComputed||computed===-1/0&&result===-1/0)&&(result=value,lastComputed=computed)});return result},_.min=function(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee&&null!=obj){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;length>i;i++)value=obj[i],result>value&&(result=value)}else iteratee=_.iteratee(iteratee,context),_.each(obj,function(value,index,list){computed=iteratee(value,index,list),(lastComputed>computed||1/0===computed&&1/0===result)&&(result=value,lastComputed=computed)});return result},_.shuffle=function(obj){for(var rand,set=obj&&obj.length===+obj.length?obj:_.values(obj),length=set.length,shuffled=Array(length),index=0;length>index;index++)rand=_.random(0,index),rand!==index&&(shuffled[index]=shuffled[rand]),shuffled[rand]=set[index];return shuffled},_.sample=function(obj,n,guard){return null==n||guard?(obj.length!==+obj.length&&(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))},_.sortBy=function(obj,iteratee,context){return iteratee=_.iteratee(iteratee,context),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};return iteratee=_.iteratee(iteratee,context),_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)}),result}};_.groupBy=group(function(result,value,key){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,value,key){result[key]=value}),_.countBy=group(function(result,value,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iteratee,context){iteratee=_.iteratee(iteratee,context,1);for(var value=iteratee(obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iteratee(array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.partition=function(obj,predicate,context){predicate=_.iteratee(predicate,context);var pass=[],fail=[];return _.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)}),[pass,fail]},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:0>n?[]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,output){if(shallow&&_.every(input,_.isArray))return concat.apply(output,input);for(var i=0,length=input.length;length>i;i++){var value=input[i];_.isArray(value)||_.isArguments(value)?shallow?push.apply(output,value):flatten(value,shallow,strict,output):strict||output.push(value)}return output};_.flatten=function(array,shallow){return flatten(array,shallow,!1,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iteratee,context){if(null==array)return[];_.isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=_.iteratee(iteratee,context));for(var result=[],seen=[],i=0,length=array.length;length>i;i++){var value=array[i];if(isSorted)i&&seen===value||result.push(value),seen=value;else if(iteratee){var computed=iteratee(value,i,array);_.indexOf(seen,computed)<0&&(seen.push(computed),result.push(value))}else _.indexOf(result,value)<0&&result.push(value)}return result},_.union=function(){return _.uniq(flatten(arguments,!0,!0,[]))},_.intersection=function(array){if(null==array)return[];for(var result=[],argsLength=arguments.length,i=0,length=array.length;length>i;i++){var item=array[i];if(!_.contains(result,item)){for(var j=1;argsLength>j&&_.contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result},_.difference=function(array){var rest=flatten(slice.call(arguments,1),!0,!0,[]);return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(array){if(null==array)return[];for(var length=_.max(arguments,"length").length,results=Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var idx=array.length;for("number"==typeof from&&(idx=0>from?idx+from+1:Math.min(idx,from+1));--idx>=0;)if(array[idx]===item)return idx;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=step||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;length>idx;idx++,start+=step)range[idx]=start;return range};var Ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));Ctor.prototype=func.prototype;var self=new Ctor;Ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return _.isObject(result)?result:self}},_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){for(var position=0,args=boundArgs.slice(),i=0,length=args.length;length>i;i++)args[i]===_&&(args[i]=arguments[position++]);for(;position<arguments.length;)args.push(arguments[position++]);return func.apply(this,args)}},_.bindAll=function(obj){var i,key,length=arguments.length;if(1>=length)throw new Error("bindAll must be passed function names");for(i=1;length>i;i++)key=arguments[i],obj[key]=_.bind(obj[key],obj);return obj},_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache,address=hasher?hasher.apply(this,arguments):key;return _.has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:_.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)};return function(){var now=_.now();previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining||remaining>wait?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;wait>last&&last>0?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),timeout||(context=args=null)))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}},_.compose=function(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.before=function(times,func){var memo;return function(){return--times>0?memo=func.apply(this,arguments):func=null,memo}},_.once=_.partial(_.before,2),_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){if(!_.isObject(obj))return obj;for(var source,prop,i=1,length=arguments.length;length>i;i++){source=arguments[i];for(prop in source)hasOwnProperty.call(source,prop)&&(obj[prop]=source[prop])}return obj},_.pick=function(obj,iteratee,context){var key,result={};if(null==obj)return result;if(_.isFunction(iteratee)){iteratee=createCallback(iteratee,context);for(key in obj){var value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}}else{var keys=concat.apply([],slice.call(arguments,1));obj=new Object(obj);for(var i=0,length=keys.length;length>i;i++)key=keys[i],key in obj&&(result[key]=obj[key])}return result},_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee))iteratee=_.negate(iteratee);else{var keys=_.map(concat.apply([],slice.call(arguments,1)),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)},_.defaults=function(obj){if(!_.isObject(obj))return obj;for(var i=1,length=arguments.length;length>i;i++){var source=arguments[i];for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}return obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!==toString.call(b))return!1;switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]===a)return bStack[length]===b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&"constructor"in a&&"constructor"in b&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor))return!1;aStack.push(a),bStack.push(b);var size,result;if("[object Array]"===className){if(size=a.length,result=size===b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{var key,keys=_.keys(a);if(size=keys.length,result=_.keys(b).length===size)for(;size--&&(key=keys[size],result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)););}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_.each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return _.has(obj,"callee")}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj||!1}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"===toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return null!=obj&&hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.noop=function(){},_.property=function(key){return function(obj){return obj[key]}},_.matches=function(attrs){var pairs=_.pairs(attrs),length=pairs.length;return function(obj){if(null==obj)return!length;obj=new Object(obj);for(var i=0;length>i;i++){var pair=pairs[i],key=pair[0];if(pair[1]!==obj[key]||!(key in obj))return!1}return!0}},_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=createCallback(iteratee,context,1);for(var i=0;n>i;i++)accum[i]=iteratee(i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_.invert(escapeMap),createEscaper=function(map){var escaper=function(match){return map[match]},source="(?:"+_.keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap),_.unescape=createEscaper(unescapeMap),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?object[property]():value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)},argument=settings.variable||"obj";return template.source="function("+argument+"){\n"+source+"}",template},_.chain=function(obj){var instance=_(obj);return instance._chain=!0,instance};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0],result.call(this,obj)}}),_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)},{}]},{},[1]);